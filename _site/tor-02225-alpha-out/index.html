<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Tor 0.2.2.25-alpha is out</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Your New Jekyll Site</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Tor 0.2.2.25-alpha is out</h2>
<p class="meta">03 May 2011</p>

<div class="post">
<p>Tor 0.2.2.25-alpha fixes many bugs: hidden service clients are more<br>
 robust, routers no longer overreport their bandwidth, Win7 should crash<br>
 a little less, and NEWNYM (as used by Vidalia&#39;s &quot;new identity&quot; button)<br>
 now prevents hidden service-related activity from being linkable. It<br>
 provides more information to Vidalia so you can see if your bridge is<br>
 working. Also, 0.2.2.25-alpha revamps the Entry/Exit/ExcludeNodes and<br>
 StrictNodes configuration options to make them more reliable, more<br>
 understandable, and more regularly applied. If you use those options,<br>
 please see the revised documentation for them in the manual page.</p>

<p><a href="https://www.torproject.org/download/download" title="https://www.torproject.org/download/download">https://www.torproject.org/download/download</a></p>

<p><strong>Major bugfixes:</strong></p>

<ul>
<li>Relays were publishing grossly inflated bandwidth values because<br>
they were writing their state files wrong--now they write the<br>
correct value. Also, resume reading bandwidth history from the<br>
state file correctly. Fixes bug 2704; bugfix on 0.2.2.23-alpha.</li>
<li>Improve hidden service robustness: When we find that we have<br>
extended a hidden service&#39;s introduction circuit to a relay not<br>
listed as an introduction point in the HS descriptor we currently<br>
have, retry with an introduction point from the current<br>
descriptor. Previously we would just give up. Fixes bugs 1024 and<br>
1930; bugfix on 0.2.0.10-alpha.</li>
<li>Clients now stop trying to use an exit node associated with a given<br>
destination by TrackHostExits if they fail to reach that exit node.<br>
Fixes bug 2999. Bugfix on 0.2.0.20-rc.</li>
<li>Fix crash bug on platforms where gmtime and localtime can return<br>
NULL. Windows 7 users were running into this one. Fixes part of bug<br>

<ol>
<li>Bugfix on all versions of Tor. Found by boboper.</li>
</ol></li>
</ul>

<p><strong>Security and stability fixes:</strong></p>

<ul>
<li>Don&#39;t double-free a parsable, but invalid, microdescriptor, even if<br>
it is followed in the blob we&#39;re parsing by an unparsable<br>
microdescriptor. Fixes an issue reported in a comment on bug 2954.<br>
Bugfix on 0.2.2.6-alpha; fix by &quot;cypherpunks&quot;.</li>
<li>If the Nickname configuration option isn&#39;t given, Tor would pick a<br>
nickname based on the local hostname as the nickname for a relay.<br>
Because nicknames are not very important in today&#39;s Tor and the<br>
&quot;Unnamed&quot; nickname has been implemented, this is now problematic<br>
behavior: It leaks information about the hostname without being<br>
useful at all. Fixes bug 2979; bugfix on 0.1.2.2-alpha, which<br>
introduced the Unnamed nickname. Reported by tagnaq.</li>
<li>Fix an uncommon assertion failure when running with DNSPort under<br>
heavy load. Fixes bug 2933; bugfix on 0.2.0.1-alpha.</li>
<li>Avoid linkability based on cached hidden service descriptors: forget<br>
all hidden service descriptors cached as a client when processing a<br>
SIGNAL NEWNYM command. Fixes bug 3000; bugfix on 0.0.6.</li>
</ul>

<p><strong>Major features:</strong></p>

<ul>
<li>Export GeoIP information on bridge usage to controllers even if we<br>
have not yet been running for 24 hours. Now Vidalia bridge operators<br>
can get more accurate and immediate feedback about their<br>
contributions to the network.</li>
</ul>

<p><strong>Major features and bugfixes (node selection):</strong></p>

<ul>
<li>Revise and reconcile the meaning of the ExitNodes, EntryNodes,<br>
ExcludeEntryNodes, ExcludeExitNodes, ExcludeNodes, and StrictNodes<br>
options. Previously, we had been ambiguous in describing what<br>
counted as an &quot;exit&quot; node, and what operations exactly &quot;StrictNodes<br>
0&quot; would permit. This created confusion when people saw nodes built<br>
through unexpected circuits, and made it hard to tell real bugs from<br>
surprises. Now the intended behavior is:

<ul>
<li>&quot;Exit&quot;, in the context of ExitNodes and ExcludeExitNodes, means<br>
a node that delivers user traffic outside the Tor network.</li>
<li>&quot;Entry&quot;, in the context of EntryNodes, means a node used as the<br>
first hop of a multihop circuit. It doesn&#39;t include direct<br>
connections to directory servers.</li>
<li>&quot;ExcludeNodes&quot; applies to all nodes.</li>
<li>&quot;StrictNodes&quot; changes the behavior of ExcludeNodes only. When<br>
StrictNodes is set, Tor should avoid all nodes listed in<br>
ExcludeNodes, even when it will make user requests fail. When<br>
StrictNodes is *not* set, then Tor should follow ExcludeNodes<br>
whenever it can, except when it must use an excluded node to<br>
perform self-tests, connect to a hidden service, provide a<br>
hidden service, fulfill a .exit request, upload directory<br>
information, or fetch directory information.</li>
</ul></li>
</ul>

<p>Collectively, the changes to implement the behavior fix bug 1090.</p>

<ul>
<li>ExcludeNodes now takes precedence over EntryNodes and ExitNodes: if<br>
a node is listed in both, it&#39;s treated as excluded.</li>
<li>ExcludeNodes now applies to directory nodes -- as a preference if<br>
StrictNodes is 0, or an absolute requirement if StrictNodes is 1.<br>
Don&#39;t exclude all the directory authorities and set StrictNodes to 1<br>
unless you really want your Tor to break.</li>
<li>ExcludeNodes and ExcludeExitNodes now override exit enclaving.</li>
<li>ExcludeExitNodes now overrides .exit requests.</li>
<li>We don&#39;t use bridges listed in ExcludeNodes.</li>
<li><p>When StrictNodes is 1:</p>

<ul>
<li>We now apply ExcludeNodes to hidden service introduction points<br>
and to rendezvous points selected by hidden service users. This<br>
can make your hidden service less reliable: use it with caution!</li>
<li>If we have used ExcludeNodes on ourself, do not try relay<br>
reachability self-tests.</li>
<li>If we have excluded all the directory authorities, we will not<br>
even try to upload our descriptor if we&#39;re a relay.</li>
<li>Do not honor .exit requests to an excluded node.</li>
</ul></li>
<li><p>Remove a misfeature that caused us to ignore the Fast/Stable flags<br>
when ExitNodes is set. Bugfix on 0.2.2.7-alpha.</p></li>
<li><p>When the set of permitted nodes changes, we now remove any mappings<br>
introduced via TrackExitHosts to now-excluded nodes. Bugfix on<br>
0.1.0.1-rc.</p></li>
<li><p>We never cannibalize a circuit that had excluded nodes on it, even<br>
if StrictNodes is 0. Bugfix on 0.1.0.1-rc.</p></li>
<li><p>Revert a change where we would be laxer about attaching streams to<br>
circuits than when building the circuits. This was meant to prevent<br>
a set of bugs where streams were never attachable, but our improved<br>
code here should make this unnecessary. Bugfix on 0.2.2.7-alpha.</p></li>
<li><p>Keep track of how many times we launch a new circuit to handle a<br>
given stream. Too many launches could indicate an inconsistency<br>
between our &quot;launch a circuit to handle this stream&quot; logic and our<br>
&quot;attach this stream to one of the available circuits&quot; logic.</p></li>
<li><p>Improve log messages related to excluded nodes.</p></li>
</ul>

<p><strong>Minor bugfixes:</strong></p>

<ul>
<li>Fix a spurious warning when moving from a short month to a long<br>
month on relays with month-based BandwidthAccounting. Bugfix on<br>
0.2.2.17-alpha; fixes bug 3020.</li>
<li>When a client finds that an origin circuit has run out of 16-bit<br>
stream IDs, we now mark it as unusable for new streams. Previously,<br>
we would try to close the entire circuit. Bugfix on 0.0.6.</li>
<li>Add a forgotten cast that caused a compile warning on OS X 10.6.<br>
Bugfix on 0.2.2.24-alpha.</li>
<li>Be more careful about reporting the correct error from a failed<br>
connect() system call. Under some circumstances, it was possible to<br>
look at an incorrect value for errno when sending the end reason.<br>
Bugfix on 0.1.0.1-rc.</li>
<li>Correctly handle an &quot;impossible&quot; overflow cases in connection byte<br>
counting, where we write or read more than 4GB on an edge connection<br>
in a single second. Bugfix on 0.1.2.8-beta.</li>
<li>Correct the warning displayed when a rendezvous descriptor exceeds<br>
the maximum size. Fixes bug 2750; bugfix on 0.2.1.5-alpha. Found by<br>
John Brooks.</li>
<li>Clients and hidden services now use HSDir-flagged relays for hidden<br>
service descriptor downloads and uploads even if the relays have no<br>
DirPort set and the client has disabled TunnelDirConns. This will<br>
eventually allow us to give the HSDir flag to relays with no<br>
DirPort. Fixes bug 2722; bugfix on 0.2.1.6-alpha.</li>
<li>Downgrade &quot;no current certificates known for authority&quot; message from<br>
Notice to Info. Fixes bug 2899; bugfix on 0.2.0.10-alpha.</li>
<li>Make the SIGNAL DUMP control-port command work on FreeBSD. Fixes bug<br>

<ol>
<li>Bugfix on 0.1.1.1-alpha.</li>
</ol></li>
<li>Only limit the lengths of single HS descriptors, even when multiple<br>
HS descriptors are published to an HSDir relay in a single POST<br>
operation. Fixes bug 2948; bugfix on 0.2.1.5-alpha. Found by hsdir.</li>
<li>Write the current time into the LastWritten line in our state file,<br>
rather than the time from the previous write attempt. Also, stop<br>
trying to use a time of -1 in our log statements. Fixes bug 3039;<br>
bugfix on 0.2.2.14-alpha.</li>
<li>Be more consistent in our treatment of file system paths. &quot;~&quot; should<br>
get expanded to the user&#39;s home directory in the Log config option.<br>
Fixes bug 2971; bugfix on 0.2.0.1-alpha, which introduced the<br>
feature for the -f and --DataDirectory options.</li>
</ul>

<p><strong>Minor features:</strong></p>

<ul>
<li>Make sure every relay writes a state file at least every 12 hours.<br>
Previously, a relay could go for weeks without writing its state<br>
file, and on a crash could lose its bandwidth history, capacity<br>
estimates, client country statistics, and so on. Addresses bug 3012.</li>
<li>Send END_STREAM_REASON_NOROUTE in response to EHOSTUNREACH errors.<br>
Clients before 0.2.1.27 didn&#39;t handle NOROUTE correctly, but such<br>
clients are already deprecated because of security bugs.</li>
<li>Don&#39;t allow v0 hidden service authorities to act as clients.<br>
Required by fix for bug 3000.</li>
<li>Ignore SIGNAL NEWNYM commands on relay-only Tor instances. Required<br>
by fix for bug 3000.</li>
<li>Ensure that no empty <a href="read%7Cwrite">dirreq-</a>-history lines are added<br>
to an extrainfo document. Implements ticket 2497.</li>
</ul>

<p><strong>Code simplification and refactoring:</strong></p>

<ul>
<li>Remove workaround code to handle directory responses from servers<br>
that had bug 539 (they would send HTTP status 503 responses _and_<br>
send a body too). Since only server versions before<br>
0.2.0.16-alpha/0.1.2.19 were affected, there is no longer reason to<br>
keep the workaround in place.</li>
<li>Remove the old &#39;fuzzy time&#39; logic. It was supposed to be used for<br>
handling calculations where we have a known amount of clock skew and<br>
an allowed amount of unknown skew. But we only used it in three<br>
places, and we never adjusted the known/unknown skew values. This is<br>
still something we might want to do someday, but if we do, we&#39;ll<br>
want to do it differently.</li>
<li>Avoid signed/unsigned comparisons by making SIZE_T_CEILING unsigned.<br>
None of the cases where we did this before were wrong, but by making<br>
this change we avoid warnings. Fixes bug 2475; bugfix on 0.2.1.28.</li>
<li>Use GetTempDir to find the proper temporary directory location on<br>
Windows when generating temporary files for the unit tests. Patch by<br>
Gisle Vanem.</li>
</ul>

</div>
<p>- erinn</p>


          <div class="footer">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
