<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Tor 0.2.2.34 is released (security patches)</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Your New Jekyll Site</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Tor 0.2.2.34 is released (security patches)</h2>
<p class="meta">28 Oct 2011</p>

<div class="post">
<p><strong>Tor 0.2.2.34 fixes a critical anonymity vulnerability where an attacker<br>
can deanonymize Tor users. Everybody should upgrade.</strong></p>

<p>The attack relies on four components:</p>

<ul>
<li>1) Clients reuse their TLS cert when talking to different relays, so relays can recognize a user by the identity key in her cert. </li>
<li>2) An attacker who knows the client&#39;s identity key can probe each guard relay to see if that identity key is connected to that guard relay right now. </li>
<li>3) A variety of active attacks in the literature (starting from &quot;Low-Cost Traffic Analysis of Tor&quot; by Murdoch and Danezis in 2005) allow a malicious website to discover the guard relays that a Tor user visiting the website is using. </li>
<li>4) Clients typically pick three guards at random, so the set of guards for a given user could well be a unique fingerprint for her. This release fixes components #1 and #2, which is enough to block the attack; the other two remain as open research problems.</li>
</ul>

<p>Special thanks to &quot;frosty_un&quot; for reporting the issue to us! (As far as we know, this has nothing to do with any claimed attack currently getting attention in the media.)</p>

<p><strong>Clients should upgrade so they are no longer recognizable by the TLS certs they present. Relays should upgrade so they no longer allow a remote attacker to probe them to test whether unpatched clients are currently connected to them.</strong></p>

<p>This release also fixes several vulnerabilities that allow an attacker to enumerate bridge relays. Some bridge enumeration attacks still remain; see for example proposal 188.</p>

<p><a href="https://torproject.org/download/download-easy" title="https://torproject.org/download/download-easy">https://torproject.org/download/download-easy</a></p>

<p>Changes in version 0.2.2.34 - 2011-10-26</p>

<p><strong>Privacy/anonymity fixes (clients):</strong></p>

<ul>
<li>Clients and bridges no longer send TLS certificate chains on outgoing OR<br>
connections. Previously, each client or bridge would use the same cert chain<br>
for all outgoing OR connections until its IP address changes, which allowed any<br>
relay that the client or bridge contacted to determine which entry guards it is<br>
using. Fixes CVE-2011-2768. Bugfix on 0.0.9pre5; found by &quot;frosty_un&quot;.</li>
<li>If a relay receives a CREATE_FAST cell on a TLS connection, it no longer<br>
considers that connection as suitable for satisfying a circuit EXTEND request.<br>
Now relays can protect clients from the CVE-2011-2768 issue even if the clients<br>
haven&#39;t upgraded yet.</li>
<li>Directory authorities no longer assign the Guard flag to relays that<br>
haven&#39;t upgraded to the above &quot;refuse EXTEND requests to client connections&quot;<br>
fix. Now directory authorities can protect clients from the CVE-2011-2768 issue<br>
even if neither the clients nor the relays have upgraded yet. There&#39;s a new<br>
&quot;GiveGuardFlagTo_CVE_2011_2768_VulnerableRelays&quot; config option to let us<br>
transition smoothly, else tomorrow there would be no guard relays.</li>
</ul>

<p><strong>Privacy/anonymity fixes (bridge enumeration):</strong></p>

<ul>
<li>Bridge relays now do their directory fetches inside Tor TLS connections,<br>
like all the other clients do, rather than connecting directly to the DirPort<br>
like public relays do. Removes another avenue for enumerating bridges. Fixes<br>
bug 4115; bugfix on 0.2.0.35.</li>
<li>Bridges relays now build circuits for themselves in a more similar way to<br>
how clients build them. Removes another avenue for enumerating bridges. Fixes<br>
bug 4124; bugfix on 0.2.0.3-alpha, when bridges were introduced.</li>
<li>Bridges now refuse CREATE or CREATE_FAST cells on OR connections that they<br>
initiated. Relays could distinguish incoming bridge connections from client<br>
connections, creating another avenue for enumerating bridges. Fixes<br>
CVE-2011-2769. Bugfix on 0.2.0.3-alpha. Found by &quot;frosty_un&quot;.</li>
</ul>

<p><strong>Major bugfixes:</strong></p>

<ul>
<li>Fix a crash bug when changing node restrictions while a DNS lookup is<br>
in-progress. Fixes bug 4259; bugfix on 0.2.2.25-alpha. Bugfix by &quot;Tey&#39;&quot;.</li>
<li>Don&#39;t launch a useless circuit after failing to use one of a hidden<br>
service&#39;s introduction points. Previously, we would launch a new introduction<br>
circuit, but not set the hidden service which that circuit was intended to<br>
connect to, so it would never actually be used. A different piece of code would<br>
then create a new introduction circuit correctly. Bug reported by katmagic and<br>
found by Sebastian Hahn. Bugfix on 0.2.1.13-alpha; fixes bug 4212.</li>
</ul>

<p><strong>Minor bugfixes:</strong></p>

<ul>
<li>Change an integer overflow check in the OpenBSD_Malloc code so that GCC is<br>
less likely to eliminate it as impossible. Patch from Mansour Moufid. Fixes bug<br>
4059.</li>
<li>When a hidden service turns an extra service-side introduction circuit into<br>
a general-purpose circuit, free the rend_data and intro_key fields first, so we<br>
won&#39;t leak memory if the circuit is cannibalized for use as another<br>
service-side introduction circuit. Bugfix on 0.2.1.7-alpha; fixes bug<br>
4251.</li>
<li>Bridges now skip DNS self-tests, to act a little more stealthily. Fixes<br>
bug 4201; bugfix on 0.2.0.3-alpha, which first introduced bridges. Patch by<br>
&quot;warms0x&quot;.</li>
<li>Fix internal bug-checking logic that was supposed to catch failures in<br>
digest generation so that it will fail more robustly if we ask for a<br>
nonexistent algorithm. Found by Coverity Scan. Bugfix on 0.2.2.1-alpha; fixes<br>
Coverity CID 479.</li>
<li>Report any failure in init_keys() calls launched because our IP address has<br>
changed. Spotted by Coverity Scan. Bugfix on 0.1.1.4-alpha; fixes CID 484.</li>
</ul>

<p><strong>Minor bugfixes (log messages and documentation):</strong></p>

<ul>
<li>Remove a confusing dollar sign from the example fingerprint in the man<br>
page, and also make the example fingerprint a valid one. Fixes bug 4309; bugfix<br>
on 0.2.1.3-alpha.</li>
<li>The next version of Windows will be called Windows 8, and it has a major<br>
version of 6, minor version of 2. Correctly identify that version instead of<br>
calling it &quot;Very recent version&quot;. Resolves ticket 4153; reported by<br>
funkstar.</li>
<li>Downgrade log messages about circuit timeout calibration from &quot;notice&quot; to<br>
&quot;info&quot;: they don&#39;t require or suggest any human intervention. Patch from Tom<br>
Lowenthal. Fixes bug 4063; bugfix on 0.2.2.14-alpha.</li>
</ul>

<p><strong>Minor features:</strong></p>

<ul>
<li>Turn on directory request statistics by default and include them in<br>
extra-info descriptors. Don&#39;t break if we have no GeoIP database. Backported<br>
from 0.2.3.1-alpha; implements ticket 3951.</li>
<li>Update to the October 4 2011 Maxmind GeoLite Country database.</li>
</ul>

</div>
<p>- erinn</p>


          <div class="footer">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
