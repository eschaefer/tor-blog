<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>The Tor Project Blog</title>
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="/blog/css/main.css">
    <link rel="canonical" href="http://tor.jmtodaro.com//blog/blog/page89/">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/blog/">The Tor Project Blog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
	<a class="page-link" href="/blog/">Blog Home</a>
        <a class="page-link" href="/blog/archive">Archives</a>
	<a class="page-link" href="https://www.torproject.org/about/overview">About Tor</a>
        <a class="page-link donate" href="https://www.torproject.org/donate/donate">Donate</a>

      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <!-- Pages with side column need a 'maincol' class -->
<div class="home maincol">

    <ul class="post-content">
	
	<li>
	  <h2>
	    <a class="post-link" href="/blog/tor-02225-alpha-out">Tor 0.2.2.25-alpha is out</a>
	  </h2>
	  <span class="post-meta">Posted May 2, 2011 by <a class="post-author" href="/blogerinn">erinn</a> in 
	      
		  <a class="post-category post-category-js" href="/tag/alpha releases">alpha releases</a>
              
		  <a class="post-category post-category-js" href="/tag/bugfixes">bugfixes</a>
              
		  <a class="post-category post-category-js" href="/tag/feature enhancements">feature enhancements</a>
              
		  <a class="post-category post-category-js" href="/tag/security fixes">security fixes</a>
              
		  <a class="post-category post-category-js" href="/tag/strictnodes">strictnodes</a>
              
		  <a class="post-category post-category-js" href="/tag/tor">tor</a>
              
          </span>

          <div class="post-description">
	      <p>Tor 0.2.2.25-alpha fixes many bugs: hidden service clients are more<br>
 robust, routers no longer overreport their bandwidth, Win7 should crash<br>
 a little less, and NEWNYM (as used by Vidalia&#39;s &quot;new identity&quot; button)<br>
 now prevents hidden service-related activity from being linkable. It<br>
 provides more information to Vidalia so you can see if your bridge is<br>
 working. Also, 0.2.2.25-alpha revamps the Entry/Exit/ExcludeNodes and<br>
 StrictNodes configuration options to make them more reliable, more<br>
 understandable, and more regularly applied. If you use those options,<br>
 please see the revised documentation for them in the manual page.</p>

<p><a href="https://www.torproject.org/download/download" title="https://www.torproject.org/download/download">https://www.torproject.org/download/download</a></p>

<p><strong>Major bugfixes:</strong></p>

<ul>
<li>  Relays were publishing grossly inflated bandwidth values because<br>
 they were writing their state files wrong--now they write the<br>
 correct value. Also, resume reading bandwidth history from the<br>
 state file correctly. Fixes bug 2704; bugfix on 0.2.2.23-alpha.</li>
<li>  Improve hidden service robustness: When we find that we have<br>
 extended a hidden service&#39;s introduction circuit to a relay not<br>
 listed as an introduction point in the HS descriptor we currently<br>
 have, retry with an introduction point from the current<br>
 descriptor. Previously we would just give up. Fixes bugs 1024 and<br>
 1930; bugfix on 0.2.0.10-alpha.</li>
<li>  Clients now stop trying to use an exit node associated with a given<br>
 destination by TrackHostExits if they fail to reach that exit node.<br>
 Fixes bug 2999. Bugfix on 0.2.0.20-rc.</li>
<li>  Fix crash bug on platforms where gmtime and localtime can return<br>
 NULL. Windows 7 users were running into this one. Fixes part of bug<br>

<ol>
<li>Bugfix on all versions of Tor. Found by boboper.</li>
</ol></li>
</ul>

<p><strong>Security and stability fixes:</strong></p>

<ul>
<li>  Don&#39;t double-free a parsable, but invalid, microdescriptor, even if<br>
 it is followed in the blob we&#39;re parsing by an unparsable<br>
 microdescriptor. Fixes an issue reported in a comment on bug 2954.<br>
 Bugfix on 0.2.2.6-alpha; fix by &quot;cypherpunks&quot;.</li>
<li>  If the Nickname configuration option isn&#39;t given, Tor would pick a<br>
 nickname based on the local hostname as the nickname for a relay.<br>
 Because nicknames are not very important in today&#39;s Tor and the<br>
 &quot;Unnamed&quot; nickname has been implemented, this is now problematic<br>
 behavior: It leaks information about the hostname without being<br>
 useful at all. Fixes bug 2979; bugfix on 0.1.2.2-alpha, which<br>
 introduced the Unnamed nickname. Reported by tagnaq.</li>
<li>  Fix an uncommon assertion failure when running with DNSPort under<br>
 heavy load. Fixes bug 2933; bugfix on 0.2.0.1-alpha.</li>
<li>  Avoid linkability based on cached hidden service descriptors: forget<br>
 all hidden service descriptors cached as a client when processing a<br>
 SIGNAL NEWNYM command. Fixes bug 3000; bugfix on 0.0.6.</li>
</ul>

<p><strong>Major features:</strong></p>

<ul>
<li>  Export GeoIP information on bridge usage to controllers even if we<br>
 have not yet been running for 24 hours. Now Vidalia bridge operators<br>
 can get more accurate and immediate feedback about their<br>
 contributions to the network.</li>
</ul>

<p><strong>Major features and bugfixes (node selection):</strong></p>

<ul>
<li><p>Revise and reconcile the meaning of the ExitNodes, EntryNodes,<br>
 ExcludeEntryNodes, ExcludeExitNodes, ExcludeNodes, and StrictNodes<br>
 options. Previously, we had been ambiguous in describing what<br>
 counted as an &quot;exit&quot; node, and what operations exactly &quot;StrictNodes<br>
 0&quot; would permit. This created confusion when people saw nodes built<br>
 through unexpected circuits, and made it hard to tell real bugs from<br>
 surprises. Now the intended behavior is:</p>

<ul>
<li>  &quot;Exit&quot;, in the context of ExitNodes and ExcludeExitNodes, means<br>
 a node that delivers user traffic outside the Tor network.</li>
<li>  &quot;Entry&quot;, in the context of EntryNodes, means a node used as the<br>
 first hop of a multihop circuit. It doesn&#39;t include direct<br>
 connections to directory servers.</li>
<li>  &quot;ExcludeNodes&quot; applies to all nodes.</li>
<li>  &quot;StrictNodes&quot; changes the behavior of ExcludeNodes only. When<br>
 StrictNodes is set, Tor should avoid all nodes listed in<br>
 ExcludeNodes, even when it will make user requests fail. When<br>
 StrictNodes is *not* set, then Tor should follow ExcludeNodes<br>
 whenever it can, except when it must use an excluded node to<br>
 perform self-tests, connect to a hidden service, provide a<br>
 hidden service, fulfill a .exit request, upload directory<br>
 information, or fetch directory information.</li>
</ul>

<p>Collectively, the changes to implement the behavior fix bug 1090.</p></li>
<li><p>ExcludeNodes now takes precedence over EntryNodes and ExitNodes: if<br>
 a node is listed in both, it&#39;s treated as excluded.</p></li>
<li><p>ExcludeNodes now applies to directory nodes -- as a preference if<br>
 StrictNodes is 0, or an absolute requirement if StrictNodes is 1.<br>
 Don&#39;t exclude all the directory authorities and set StrictNodes to 1<br>
 unless you really want your Tor to break.</p></li>
<li><p>ExcludeNodes and ExcludeExitNodes now override exit enclaving.</p></li>
<li><p>ExcludeExitNodes now overrides .exit requests.</p></li>
<li><p>We don&#39;t use bridges listed in ExcludeNodes.</p></li>
<li><p>When StrictNodes is 1:</p>

<ul>
<li>  We now apply ExcludeNodes to hidden service introduction points<br>
 and to rendezvous points selected by hidden service users. This<br>
 can make your hidden service less reliable: use it with caution!</li>
<li>  If we have used ExcludeNodes on ourself, do not try relay<br>
 reachability self-tests.</li>
<li>  If we have excluded all the directory authorities, we will not<br>
 even try to upload our descriptor if we&#39;re a relay.</li>
<li>  Do not honor .exit requests to an excluded node.</li>
</ul></li>
<li><p>Remove a misfeature that caused us to ignore the Fast/Stable flags<br>
 when ExitNodes is set. Bugfix on 0.2.2.7-alpha.</p></li>
<li><p>When the set of permitted nodes changes, we now remove any mappings<br>
 introduced via TrackExitHosts to now-excluded nodes. Bugfix on<br>
 0.1.0.1-rc.</p></li>
<li><p>We never cannibalize a circuit that had excluded nodes on it, even<br>
 if StrictNodes is 0. Bugfix on 0.1.0.1-rc.</p></li>
<li><p>Revert a change where we would be laxer about attaching streams to<br>
 circuits than when building the circuits. This was meant to prevent<br>
 a set of bugs where streams were never attachable, but our improved<br>
 code here should make this unnecessary. Bugfix on 0.2.2.7-alpha.</p></li>
<li><p>Keep track of how many times we launch a new circuit to handle a<br>
 given stream. Too many launches could indicate an inconsistency<br>
 between our &quot;launch a circuit to handle this stream&quot; logic and our<br>
 &quot;attach this stream to one of the available circuits&quot; logic.</p></li>
<li><p>Improve log messages related to excluded nodes.</p></li>
</ul>

<p><strong>Minor bugfixes:</strong></p>

<ul>
<li>  Fix a spurious warning when moving from a short month to a long<br>
 month on relays with month-based BandwidthAccounting. Bugfix on<br>
 0.2.2.17-alpha; fixes bug 3020.</li>
<li>  When a client finds that an origin circuit has run out of 16-bit<br>
 stream IDs, we now mark it as unusable for new streams. Previously,<br>
 we would try to close the entire circuit. Bugfix on 0.0.6.</li>
<li>  Add a forgotten cast that caused a compile warning on OS X 10.6.<br>
 Bugfix on 0.2.2.24-alpha.</li>
<li>  Be more careful about reporting the correct error from a failed<br>
 connect() system call. Under some circumstances, it was possible to<br>
 look at an incorrect value for errno when sending the end reason.<br>
 Bugfix on 0.1.0.1-rc.</li>
<li>  Correctly handle an &quot;impossible&quot; overflow cases in connection byte<br>
 counting, where we write or read more than 4GB on an edge connection<br>
 in a single second. Bugfix on 0.1.2.8-beta.</li>
<li>  Correct the warning displayed when a rendezvous descriptor exceeds<br>
 the maximum size. Fixes bug 2750; bugfix on 0.2.1.5-alpha. Found by<br>
 John Brooks.</li>
<li>  Clients and hidden services now use HSDir-flagged relays for hidden<br>
 service descriptor downloads and uploads even if the relays have no<br>
 DirPort set and the client has disabled TunnelDirConns. This will<br>
 eventually allow us to give the HSDir flag to relays with no<br>
 DirPort. Fixes bug 2722; bugfix on 0.2.1.6-alpha.</li>
<li>  Downgrade &quot;no current certificates known for authority&quot; message from<br>
 Notice to Info. Fixes bug 2899; bugfix on 0.2.0.10-alpha.</li>
<li>  Make the SIGNAL DUMP control-port command work on FreeBSD. Fixes bug<br>

<ol>
<li>Bugfix on 0.1.1.1-alpha.</li>
</ol></li>
<li>  Only limit the lengths of single HS descriptors, even when multiple<br>
 HS descriptors are published to an HSDir relay in a single POST<br>
 operation. Fixes bug 2948; bugfix on 0.2.1.5-alpha. Found by hsdir.</li>
<li>  Write the current time into the LastWritten line in our state file,<br>
 rather than the time from the previous write attempt. Also, stop<br>
 trying to use a time of -1 in our log statements. Fixes bug 3039;<br>
 bugfix on 0.2.2.14-alpha.</li>
<li>  Be more consistent in our treatment of file system paths. &quot;~&quot; should<br>
 get expanded to the user&#39;s home directory in the Log config option.<br>
 Fixes bug 2971; bugfix on 0.2.0.1-alpha, which introduced the<br>
 feature for the -f and --DataDirectory options.</li>
</ul>

<p><strong>Minor features:</strong></p>

<ul>
<li>  Make sure every relay writes a state file at least every 12 hours.<br>
 Previously, a relay could go for weeks without writing its state<br>
 file, and on a crash could lose its bandwidth history, capacity<br>
 estimates, client country statistics, and so on. Addresses bug 3012.</li>
<li>  Send END_STREAM_REASON_NOROUTE in response to EHOSTUNREACH errors.<br>
 Clients before 0.2.1.27 didn&#39;t handle NOROUTE correctly, but such<br>
 clients are already deprecated because of security bugs.</li>
<li>  Don&#39;t allow v0 hidden service authorities to act as clients.<br>
 Required by fix for bug 3000.</li>
<li>  Ignore SIGNAL NEWNYM commands on relay-only Tor instances. Required<br>
 by fix for bug 3000.</li>
<li>  Ensure that no empty <a href="read%7Cwrite">dirreq-</a>-history lines are added<br>
 to an extrainfo document. Implements ticket 2497.</li>
</ul>

<p><strong>Code simplification and refactoring:</strong></p>

<ul>
<li>  Remove workaround code to handle directory responses from servers<br>
 that had bug 539 (they would send HTTP status 503 responses _and_<br>
 send a body too). Since only server versions before<br>
 0.2.0.16-alpha/0.1.2.19 were affected, there is no longer reason to<br>
 keep the workaround in place.</li>
<li>  Remove the old &#39;fuzzy time&#39; logic. It was supposed to be used for<br>
 handling calculations where we have a known amount of clock skew and<br>
 an allowed amount of unknown skew. But we only used it in three<br>
 places, and we never adjusted the known/unknown skew values. This is<br>
 still something we might want to do someday, but if we do, we&#39;ll<br>
 want to do it differently.</li>
<li>  Avoid signed/unsigned comparisons by making SIZE_T_CEILING unsigned.<br>
 None of the cases where we did this before were wrong, but by making<br>
 this change we avoid warnings. Fixes bug 2475; bugfix on 0.2.1.28.</li>
<li>  Use GetTempDir to find the proper temporary directory location on<br>
 Windows when generating temporary files for the unit tests. Patch by<br>
 Gisle Vanem.</li>
</ul>
	    
	  </div>
	  	  
	  <div class="post-footer">
	      <a class="post-blog" href="/blogerinn">erinn's Blog</a>
	      <a class="post-cmtlink" href="/blog/tor-02225-alpha-out/#disqus_thread">Leave a comment</a>
<!--	      <a class="post-cmtlink" href="/blog/tor-02225-alpha-out#comments">Leave a comment</a> -->
	  </div>
	  <br />
	  <br />
	</li>
      
	<li>
	  <h2>
	    <a class="post-link" href="/blog/toggle-or-not-toggle-end-torbutton">To Toggle, or not to Toggle: The End of Torbutton</a>
	  </h2>
	  <span class="post-meta">Posted May 1, 2011 by <a class="post-author" href="/blogmikeperry">mikeperry</a> in 
	      
		  <a class="post-category post-category-js" href="/tag/firefox">firefox</a>
              
		  <a class="post-category post-category-js" href="/tag/tor browser">tor browser</a>
              
		  <a class="post-category post-category-js" href="/tag/tor browser bundle">tor browser bundle</a>
              
		  <a class="post-category post-category-js" href="/tag/torbutton">torbutton</a>
              
		  <a class="post-category post-category-js" href="/tag/usability">usability</a>
              
          </span>

          <div class="post-description">
	      <p>In a random bar about two years ago, a Google Chrome developer asked me why Torbutton didn&#39;t just launch a new, clean Firefox profile/instance to deal with the tremendous number of state separation issues. Simply by virtue of him asking me this question, I realized how much better off Chrome was by implementing Incognito Mode this way and how much simpler it must have been for them overall (though they did not/do not deal with anywhere near as many issues as Torbutton does)...</p>

<p>So I took a deep breath, and explained how the original use model of Torbutton and my initial ignorance at the size of the problem had led me through a series of incremental improvements to address the state isolation issue one item at a time. Since the toggle model was present at the beginning of this vision quest, it was present at the end.</p>

<p>I realized at that same instant that in hindsight, this decision was monumentally stupid, and that I had been working harder, not smarter. However, I thought then that since we had the toggle model built, we might as well keep it: it allowed people to use their standard issue Firefoxes easily and painlessly with Tor.</p>

<p>I now no longer believe even this much. I think we should completely do away with the toggle model, as well as the entire idea of Torbutton as a separate piece of user-facing software, and rely solely on the Tor Browser Bundles, except perhaps with the addition of standalone Tor+Vidalia binaries for use by experts and relay operators.</p>

<p>The Tor Browser Bundles will include Torbutton, but we will no longer recommend that people use Torbutton without Tor Browser. Torbutton will be removed from addons.mozilla.org, and the Torbutton download page will clearly state that it is for experts only. If serious unfixed security issues begin to accumulate against the toggle model, we will stop providing Torbutton xpis at all.</p>

<p>I believe this shift must be done for a few reasons: some usability, some technical. Since I feel the usability issues trump the technical ones, I&#39;ll discuss them first.</p>

<p>Unfortunately, the Tor Project doesn&#39;t really have funding to conduct official usability studies to help us make the best choice, but I think that even without them, it is pretty clear that this migration is what we must do to improve the status quo.</p>

<p>I think the average user is horribly confused by both the toggle model and the need to install additional software into Firefox (or conversely, the need to *also* install Tor software onto their computers after they install Torbutton). I also think that the average user is not likely to use this software safely. They are likely to log in to sites over Tor that they shouldn&#39;t, forget which tor mode they are in, and forget which mode certain tabs were opened under. These are all nightmare situations for anonymity and privacy.</p>

<p>On the technical side, several factors are forcing us in the direction of a short-term fork of Firefox. The over-arching issue is that the set of bugfixes required to maintain the toggle model is a superset of those required to maintain the browser model. <a href="https://trac.torproject.org/projects/tor/report/39">Trac report #39</a> lists the bugs we must fix for the browser model, where as to maintain the toggle model, we must fix bugs from <a href="https://trac.torproject.org/projects/tor/report/14">trac report #14</a> in addition to the bugs in <a href="https://trac.torproject.org/projects/tor/report/39">report #39</a>.</p>

<p>A similar issue exists with <a href="https://www.torproject.org/torbutton/en/design/#FirefoxBugs">bugs that must be fixed in Firefox</a>. The Firefox API bugs that need to be addressed to properly support the toggle model include rather esoteric and complicated issues that few groups other than Tor will find useful.</p>

<p>This means more resistance from Mozilla to get the toggle mode bugs fixed or even merged, less likelihood the fixes will be used elsewhere, and more danger they will succumb to bitrot. As a result, the lag time between fix and deployment for low-priority Firefox bugs can be as long as 3 years. See <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=280661">Bug 280661</a> for an example.</p>

<p>The Tor Browser bugs on the other hand are more directly usable by Firefox in its own Private Browsing Mode, which makes them more likely to merge quicker, and be maintained long-term. Also, because we are releasing our own Firefox-based browser, we will also have more control over experimenting with them and deploying these fixes to our users rapidly, as opposed to waiting for the next major Firefox release.</p>

<p>So, we can either invest effort in improving the UI of Torbutton to better educate users to understand our particular rabbit-hole tunnel-vision of design choices, and also solving crazier Firefox bugs; or we can reconsider our user model and try to simplify our software.</p>

<p>We don&#39;t have the manpower (ie: enough me) to do both. This means we should go with the simpler, easier option.</p>

<p>We do face a small number of barriers and downsides associated with this plan. We are collecting the issues we need to address ASAP as child tickets of this bug:<br>
 <a href="https://trac.torproject.org/projects/tor/ticket/2880" title="https://trac.torproject.org/projects/tor/ticket/2880">https://trac.torproject.org/projects/tor/ticket/2880</a></p>

<p>Overall, the downsides seem to mostly apply to expert users and how they will adapt the custom Tor setups they have built. We don&#39;t anticipate a lot of long term issues with this group, as most of the configuration options of Torbutton will remain available, and users should still be able to install custom addons and configure their Tor Browser profile however they need (even to the point of running it side-by-side to a system tor instance that is used for non-web applications).</p>

<p><a href="https://lists.torproject.org/pipermail/tor-talk/2011-April/020077.html">Additional discussion</a> about this issue has occurred on the tor-talk mailinglist.</p>

<p>Hopefully this announcement doesn&#39;t ruin your day!</p>
	    
	  </div>
	  	  
	  <div class="post-footer">
	      <a class="post-blog" href="/blogmikeperry">mikeperry's Blog</a>
	      <a class="post-cmtlink" href="/blog/toggle-or-not-toggle-end-torbutton/#disqus_thread">Leave a comment</a>
<!--	      <a class="post-cmtlink" href="/blog/toggle-or-not-toggle-end-torbutton#comments">Leave a comment</a> -->
	  </div>
	  <br />
	  <br />
	</li>
      
	<li>
	  <h2>
	    <a class="post-link" href="/blog/ipv6-future-i-hear">IPv6 is the future, I hear</a>
	  </h2>
	  <span class="post-meta">Posted Apr 28, 2011 by <a class="post-author" href="/blognickm">nickm</a> in 
	      
		  <a class="post-category post-category-js" href="/tag/development">development</a>
              
		  <a class="post-category post-category-js" href="/tag/ipv6">ipv6</a>
              
          </span>

          <div class="post-description">
	      <p>A while ago, I wrote up a description of what needs to be done to get Tor to be IPv6-compliant and sent it to the tor-dev mailinglist. I thought it might be neat to share this on the blog too, so that people know what&#39;s left to do before we an call Tor fully IPv6-compliant.</p>

<p>Currently, I&#39;m hoping that for 0.2.3.x we can at least get to the point where bridges can handle IPv6-only clients and exits can handle IPv6 addresses. If we get further, that will be even better.</p>

<hr>

<h3>Overview</h3>

<p>This document outlines what we&#39;ll have to do to make Tor fully support IPv6. It refers to other proposals, current and as-yet unwritten. It suggests a few incremental steps, each of which on its own should make Tor more useful in the brave new IPv6 future of tomorrow.</p>

<h3>Motivation</h3>

<p>Turns out, 4 billion addresses wasn&#39;t enough.</p>

<h3>What needs to change</h3>

<p>Tor uses the Internet in many ways. There are three main ways that will need to change for IPv6 support, from most urgent to least urgent.</p>

<p>Tor must allow connections from IPv6-only clients. (Currently, routers and bridges do not listen on IPv6 addresses, and can&#39;t advertise that they support IPv6 addresses, so clients can&#39;t learn that they do.)</p>

<p>Tor must transport IPv6 traffic and IPv6-related DNS traffic. (Currently, Tor only allows BEGIN cells to ask for connections to IPv4 targets or to hostnames, and only allows RESOLVE cells to request A and PTR records.)</p>

<p>Tor must allow nodes to connect to one another over IPv6.</p>

<p>Allowing IPv6-only clients is the most important, since unless we do, these clients will be unable to connect to Tor at all. Next most important is to support IPv6 DNS related dependencies and exiting to IPv6 services. Finally, allowing Tor nodes to support a dual stack of both IPv4 and IPv6 for interconnection seems like a reasonable step towards a fully hybrid v4/v6 Tor network.</p>

<p>One implementation hurdle that will need to get resolved alongside these changes is to convert uint32_t to tor_addr_t in many more places in the Tor code, so we can handle addresses being either IPv4 or IPv6. There are a few cases, e.g. the local router list, where we&#39;ll want to think harder about the resource requirements of keeping tens of thousands of larger addresses in memory.</p>

<p>More issues may of course also be discovered as we develop solutions for these issues, some of which may need to take priority.</p>

<h3>Designs that we will need to do</h3>

<p>For IPv6-only clients, we&#39;ll need to specify that routers can have multiple addresses and ORPorts.</p>

<p>There is an old proposal (118) to try to allow multiple ORPorts per router. It&#39;s been accepted; it needs to be checked for correctness, updated to track other changes in more recent Tor versions, and updated to work with the new microdescriptor designs.</p>

<p>Additionally, we&#39;ll need to audit the designs for all our codebase for places that might assume that IPs are a scarce resource. For example, clients assume that any two routers occupying an IPv4 /16 network are &quot;too close&quot; topologically to be used in the same circuit, and the bridgedb HTTPS distributor assumes that hopping from one /24 to another takes a little effort for most clients. The directory authorities assume that blacklisting an IP is an okay response to a bad router at that address. These and other places will instead need more appropriate notions of &quot;closeness&quot; and &quot;similarity&quot;.</p>

<p>We&#39;ll want to consider geographic and political boundaries rather than purely mathematical notions such as the size of network blocks.</p>

<p>We&#39;ll need a way to advertise IPv6 bridges, and to use them.</p>

<p>For transporting IPv6-only traffic, we have another accepted design proposal (117). It has some open questions concerning proper behavior with respect to DNS lookups, and also needs to be checked and updated to track current Tor designs.</p>

<p>We do not have a current accepted design proposal for allowing nodes to connect to each other via IPv6. Allowing opportunistic IPv6 traffic between nodes that can communicate with both IPv4 and IPv6 will be relatively simple, as will be bridges that have only an IPv6 address: both of these fall out relatively simply from designing a process for advertising and connecting to IPv6 addresses. The harder problem is in supporting IPv6-only Tor routers. For these, we&#39;ll need to consider network topology issues: having nodes that can&#39;t connect to all the other nodes will weaken one of our basic assumptions for path generation, so we&#39;ll need to make sure to do the analysis enough to tell whether this is safe.</p>

<h3>Ready, fire, aim: An alternative methodology</h3>

<p>At least one volunteer is currently working on IPv6 issues in Tor. If his efforts go well, it might be that our first design drafts for some of these open topics arrive concurrently with (or even in the form of!) alpha code to implement them. If so, we need to follow a variant of the design process, extracting design from code to evaluate it (rather than designing then coding). Probably, based on design review, some changes to code would be necessary.</p>
	    
	  </div>
	  	  
	  <div class="post-footer">
	      <a class="post-blog" href="/blognickm">nickm's Blog</a>
	      <a class="post-cmtlink" href="/blog/ipv6-future-i-hear/#disqus_thread">Leave a comment</a>
<!--	      <a class="post-cmtlink" href="/blog/ipv6-future-i-hear#comments">Leave a comment</a> -->
	  </div>
	  <br />
	  <br />
	</li>
      
	<li>
	  <h2>
	    <a class="post-link" href="/blog/firefox-4-tor-browser-bundle-windows">Firefox 4 Tor Browser Bundle for Windows</a>
	  </h2>
	  <span class="post-meta">Posted Apr 24, 2011 by <a class="post-author" href="/blogerinn">erinn</a> in 
	      
		  <a class="post-category post-category-js" href="/tag/firefox">firefox</a>
              
		  <a class="post-category post-category-js" href="/tag/tor browser bundle">tor browser bundle</a>
              
		  <a class="post-category post-category-js" href="/tag/windows">windows</a>
              
          </span>

          <div class="post-description">
	      <p>Windows users, your time has finally arrived! A new Tor Browser Bundle with Firefox 4 is available <a href="https://www.torproject.org/dist/torbrowser/tor-browser-2.2.24-1-alpha_en-US.exe">here</a> (<a href="https://www.torproject.org/dist/torbrowser/tor-browser-2.2.24-1-alpha_en-US.exe.asc">sig</a>). The build infrastructure has moved to a Windows 7 machine, but this bundle has been tested on both WinXP and Win7. If you encounter any strange issues, please let me know here or <a href="https://trac.torproject.org">on our bug tracker</a>. <a href="https://blog.torproject.org/blog/firefox-4-tor-browser-bundle-windows"><strong>read more »</strong></a></p>
	    
	  </div>
	  	  
	  <div class="post-footer">
	      <a class="post-blog" href="/blogerinn">erinn's Blog</a>
	      <a class="post-cmtlink" href="/blog/firefox-4-tor-browser-bundle-windows/#disqus_thread">Leave a comment</a>
<!--	      <a class="post-cmtlink" href="/blog/firefox-4-tor-browser-bundle-windows#comments">Leave a comment</a> -->
	  </div>
	  <br />
	  <br />
	</li>
      
	<li>
	  <h2>
	    <a class="post-link" href="/blog/reading-links-15-april">Reading links, 15 April</a>
	  </h2>
	  <span class="post-meta">Posted Apr 15, 2011 by <a class="post-author" href="/blogphobos">phobos</a> in 
	      
		  <a class="post-category post-category-js" href="/tag/advocacy">advocacy</a>
              
		  <a class="post-category post-category-js" href="/tag/anonymity">anonymity</a>
              
		  <a class="post-category post-category-js" href="/tag/interesting reading">interesting reading</a>
              
		  <a class="post-category post-category-js" href="/tag/privacy">privacy</a>
              
		  <a class="post-category post-category-js" href="/tag/reading links">reading links</a>
              
          </span>

          <div class="post-description">
	      <ul>
<li>  MAFIAAfire firefox extension, in response to the ICE domain name take downs, <a href="http://www.mafiaafire.com/" title="http://www.mafiaafire.com/">http://www.mafiaafire.com/</a>. What happens when mafiaafire.com is taken down?</li>
<li>  US Government Outlines Online Internet ID System. Trust us. We&#39;re the Government. <a href="https://secure.dslreports.com/shownews/Government-Outlines-Online-Internet-ID-System-113743" title="https://secure.dslreports.com/shownews/Government-Outlines-Online-Internet-ID-System-113743">https://secure.dslreports.com/shownews/Government-Outlines-Online-Intern...</a></li>
<li>  European Court of Justice To Outlaw Internet Filtering, <a href="http://falkvinge.net/2011/04/14/european-court-of-justice-to-outlaw-internet-filtering-esp-for-copyright-enforcement/" title="http://falkvinge.net/2011/04/14/european-court-of-justice-to-outlaw-internet-filtering-esp-for-copyright-enforcement/">http://falkvinge.net/2011/04/14/european-court-of-justice-to-outlaw-inte...</a></li>
<li>  Surveillance Self-Defense by the EFF, <a href="https://ssd.eff.org/" title="https://ssd.eff.org/">https://ssd.eff.org/</a></li>
<li>  Over the firewall and into the fire, <a href="http://advocacy.globalvoicesonline.org/2011/04/14/over-the-firewall-and-into-the-fire/" title="http://advocacy.globalvoicesonline.org/2011/04/14/over-the-firewall-and-into-the-fire/">http://advocacy.globalvoicesonline.org/2011/04/14/over-the-firewall-and-...</a></li>
</ul>
	    
	  </div>
	  	  
	  <div class="post-footer">
	      <a class="post-blog" href="/blogphobos">phobos's Blog</a>
	      <a class="post-cmtlink" href="/blog/reading-links-15-april/#disqus_thread">Leave a comment</a>
<!--	      <a class="post-cmtlink" href="/blog/reading-links-15-april#comments">Leave a comment</a> -->
	  </div>
	  <br />
	  <br />
	</li>
      
    </ul>
    <p class="rss-subscribe">subscribe <a href="/blog/feed.xml">via RSS</a></p>


    <!-- Pagination links -->
    
    <div class="pagination">
      <a href="/blog/index.html">&laquo; Newest</a>
      &nbsp;

      
	<a href="/blog/blog/page88">&laquo; Prev</a>
      
      &nbsp;

      <!-- Pagination vars -->
      
      
      
      
      
      
	  
      
      
      

	
	  <a href="../..//blogblog/page84">84</a>
	
      

	
	  <a href="../..//blogblog/page85">85</a>
	
      

	
	  <a href="../..//blogblog/page86">86</a>
	
      

	
	  <a href="../..//blogblog/page87">87</a>
	
      

	
	  <a href="../..//blogblog/page88">88</a>
	
      

	
	  89

	
      

	
	  <a href="../..//blogblog/page90">90</a>
	
      

	
	  <a href="../..//blogblog/page91">91</a>
	
      

	
	  <a href="../..//blogblog/page92">92</a>
	
      

	
	  <a href="../..//blogblog/page93">93</a>
	
      

	
	  <a href="../..//blogblog/page94">94</a>
	
      
      &nbsp;

      
	<a href="/blog/blog/page90">Next &raquo;</a>
      
      &nbsp;
      <a href="../..//blogblog/page147">Oldest &raquo;</a>
    </div>
    
    
    <br />

  </div>

<!-- Include the side column -->
<div class="sidecol">

<!-- RSS FEED / SEARCH -->
    <div class="sidefirst">
	<a href="/blog/feed.xml"><img src="/blog/assets/images/rss.png" alt="RSS logo">RSS</a>
	<!-- <a href="#"><img src="/blog/img/rss.png">Atom</a> -->
	<form>
        <input class="searchtext" type="text" size="10" maxlength="10"><input class="searchbutton" type="submit" value="Search">
        </form>
    </div>

<!-- EVENTS -->
    <div class ="sidebox orangebox">
	<h2>Upcoming Events</h2>
	<ul>
	    
		    <li><span><a href="/blog/tor-winter-dev-meeting-2015">Tor Winter Dev Meeting 2015</a></span></li>
	    
		    <li><span><a href="/blog/roger-and-jake-rightscon-manila">Roger and Jake at RightsCon in Manila</a></span></li>
	    
		    <li><span><a href="/blog/tor-booth-fosdem-2015">Tor booth at FOSDEM 2015</a></span></li>
	    
		    <li><span><a href="/blog/many-tor-people-pets-philadelphia">Many Tor people at PETS in Philadelphia</a></span></li>
	    
	</ul>
	<span><a href="/blog/events">full calendar &raquo;</a></span>
    </div>
    
<!-- RECENT BLOG POSTS -->
    <div class ="sidebox greenbox">
	<h2>Recent Blog Posts</h2>
	<ul>
	  
		    <li><span><a href="/blog/tor-weekly-news--february-11th-2015">Tor Weekly News — February 11th, 2015</a></span></li>
	  
		    <li><span><a href="/blog/ux-sprint-2015-wrapup">UX Sprint 2015 wrapup</a></span></li>
	  
		    <li><span><a href="/blog/guest-post-library-freedom-project-bringing-privacy-and-anonymity-libraries">Guest Post: The Library Freedom Project: Bringing privacy and anonymity to libraries</a></span></li>
	  
		    <li><span><a href="/blog/tor-design-proposals-how-we-make-changes-our-protocol">Tor design proposals: how we make changes to our protocol</a></span></li>
	  
		    <li><span><a href="/blog/tor-weekly-news--february-4th-2015">Tor Weekly News — February 4th, 2015</a></span></li>
	  
		    <li><span><a href="/blog/tor-weekly-news--january-28th-2015">Tor Weekly News — January 28th, 2015</a></span></li>
	  
		    <li><span><a href="/blog/tor-weekly-news--january-21st-2015">Tor Weekly News — January 21st, 2015</a></span></li>
	  
		    <li><span><a href="/blog/tor-browser-45a3-released">Tor Browser 4.5a3 is released</a></span></li>
	  
		    <li><span><a href="/blog/tor-weekly-news--january-14th-2015">Tor Weekly News — January 14th, 2015</a></span></li>
	  
		    <li><span><a href="/blog/tor-browser-403-released">Tor Browser 4.0.3 is released</a></span></li>
	  
	</ul>
	<span><a href="/blog/archive">more &raquo;</a></span>
    </div>
    
<!-- TAG CLOUD -->
    <div class ="tagbox orangebox">
	<h2>Blog Tag Cloud</h2>
	<ul>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 57%">
        <span><a href="/blog/tag/blog/">
            blog
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/blog/tag/first post/">
            first post
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 171%">
        <span><a href="/blog/tag/tor/">
            tor
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/blog/tag/24c3/">
            24c3
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 57%">
        <span><a href="/blog/tag/ccc/">
            ccc
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 61%">
        <span><a href="/blog/tag/talks/">
            talks
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 59%">
        <span><a href="/blog/tag/bugs/">
            bugs
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 57%">
        <span><a href="/blog/tag/crashes/">
            crashes
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 64%">
        <span><a href="/blog/tag/osx/">
            osx
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/blog/tag/qt/">
            qt
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 84%">
        <span><a href="/blog/tag/vidalia/">
            vidalia
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 67%">
        <span><a href="/blog/tag/vidalia bundle/">
            vidalia bundle
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/blog/tag/meetup/">
            meetup
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 61%">
        <span><a href="/blog/tag/attacks/">
            attacks
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/blog/tag/covert channels/">
            covert channels
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 57%">
        <span><a href="/blog/tag/media coverage/">
            media coverage
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 88%">
        <span><a href="/blog/tag/bridges/">
            bridges
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 59%">
        <span><a href="/blog/tag/incognito/">
            incognito
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 113%">
        <span><a href="/blog/tag/progress report/">
            progress report
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 84%">
        <span><a href="/blog/tag/torbrowser/">
            torbrowser
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 83%">
        <span><a href="/blog/tag/torbutton/">
            torbutton
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 65%">
        <span><a href="/blog/tag/china/">
            china
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/blog/tag/directors/">
            directors
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 75%">
        <span><a href="/blog/tag/release candidate/">
            release candidate
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 74%">
        <span><a href="/blog/tag/gsoc/">
            gsoc
        </a></span>
    </li>

	</ul>
	<span><a href="/blog/tag-cloud">more tags &raquo;</a></span>
    </div>

</div>

<div style="clear: both;"></div>  


      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">The Tor Project Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>The Tor Project Blog</li>
          <li><a href="mailto:contact@torproject.org">contact@torproject.org</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/jekyll">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">jekyll</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/jekyllrb">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">jekyllrb</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
</p>
      </div>
    </div>

  </div>

</footer>


 <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jmttest2'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    
  </body>

</html>
