<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tor Project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example that shows off a blog page with a list of posts.">
    <meta name="robots" content="noindex" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/styles.css">

    <!--[if lte IE 8]>
      <link rel="stylesheet" href="css/blog-old-ie.css">
    <![endif]-->
    <!--[if lt IE 9]>
      <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
    <![endif]-->
</head>
<body>

<body>
<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
            <a href="/"><img class="tor-logo" src="/assets/images/tor_logo.png" alt="Tor logo" /></a>
            <h1 class="brand-title">The Tor Project Blog</h1>
            <h2 class="brand-tagline">News and events from Tor</h2>

            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="pure-button" href="/events/">Events</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="https://www.torproject.org/overview">About Tor</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="https://www.torproject.org/donate/donate">Donate</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <div class="content pure-u-1 pure-u-md-3-4">
        <div>

            <!-- A wrapper for all the blog posts -->
<div class="posts">

  <h1 class="content-subhead">Recent Posts</h1>
  <div id="home">
    
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="/blog/help-create-qa-site-tor">Help create a Q&amp;A site for Tor!</a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">Runa</a> under
               |
              17 Sep 2013
          </p>
        </header>
        <div class="post-description">
          <p>A couple of months ago, we created a proposal for a Tor Q&amp;A page on Stack Exchange. The proposal moved into the commitment-phase shortly after, but we need more help to move the page into a live beta. If you would like to see a Q&amp;A site for Tor, please visit our proposal page and click the &quot;Commit!&quot;-button: <a href="http://area51.stackexchange.com/proposals/56447/tor" title="http://area51.stackexchange.com/proposals/56447/tor">http://area51.stackexchange.com/proposals/56447/tor</a></p>

<p>Thanks!</p>

        </div>
      </section>
    
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="/blog/tor-weekly-news-%E2%80%94-september-11th-2013">Tor Weekly News — September, 11th 2013</a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">lunar</a> under
              
                <a class="post-category post-category-js" href="#">tor weekly news</a>
               |
              11 Sep 2013
          </p>
        </header>
        <div class="post-description">
          <p>Welcome to the eleventh issue of Tor Weekly News, the weekly newsletter that covers what is happening in the taut Tor community.</p>

<h1>tor 0.2.4.17-rc is out</h1>

<p>There are now <a href="http://blog.fox-it.com/2013/09/05/large-botnet-cause-of-recent-tor-network-overload/">confirmations</a> that the sudden influx of Tor clients which <a href="https://lists.torproject.org/pipermail/tor-talk/2013-September/029822.html">started mid-August</a> is indeed coming from a botnet. “I guess all that work we’ve been doing on scalability was a good idea,” wrote Roger Dingledine in a blog post about <a href="https://blog.torproject.org/blog/how-to-handle-millions-new-tor-clients">how to handle millions of new Tor clients</a>.</p>

<p>On September 5th, Roger Dingledine <a href="https://lists.torproject.org/pipermail/tor-talk/2013-September/029857.html">announced the release of the third release candidate for the tor 0.2.4 series</a>. This is an emergency release “to help us tolerate the massive influx of users: 0.2.4 clients using the new (faster and safer) ‘NTor’ circuit-level handshakes now effectively <a href="https://bugs.torproject.org/9574">jump the queue</a> compared to the 0.2.3 clients using ‘TAP’ handshakes”.</p>

<p>It also contains several minor bugfixes and some new status messages for better monitoring of the current situation.</p>

<p>Roger <a href="https://lists.torproject.org/pipermail/tor-relays/2013-September/002701.html">asked relay operators to upgrade</a> to 0.2.4.17-rc : “the more relays that upgrade to 0.2.4.17-rc, the more stable and fast Tor will be for 0.2.4 users, despite the huge circuit overload that the network is seeing.”</p>

<p>For relays running Debian or Ubuntu, upgrading to the development branch can be done using the <a href="https://www.torproject.org/docs/debian.html.en#development">Tor project’s package repository</a>. <a href="https://blog.torproject.org/blog/new-tor-02417-rc-packages">New versions of the beta branch of the Tor Browser Bundle</a> are also available since September 6th. The next Tails release, scheduled for <a href="https://mailman.boum.org/pipermail/tails-dev/2013-September/003622.html">September 19th</a> will <a href="https://mailman.boum.org/pipermail/tails-dev/2013-September/003621.html">also contain tor 0.2.4.17-rc</a>.</p>

<p>Hopefully, this will be the last release candidate. What looks missing at this point to declare the 0.2.4.x series stable is simply enough time to finish the release notes.</p>

<h1>The future of Tor cryptography</h1>

<p>After the last round of revelations from Edward Snowden, <a href="https://www.schneier.com/blog/archives/2013/09/the_nsa_is_brea.html">described as “explosive” by Bruce Schneier</a>, several threads started on the tor-talk mailing list to discuss Tor cryptography.</p>

<p>A lot of what has been written is speculative at this point. But some have <a href="https://lists.torproject.org/pipermail/tor-talk/2013-September/029917.html">raised concerns</a> about 1024 bit <a href="https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange">Diffie–Hellman key exchange</a>. This has already been addressed with the introduction of the <a href="https://gitweb.torproject.org/torspec.git/blob_plain/HEAD:/proposals/216-ntor-handshake.txt">“ntor” handshake</a> in 0.2.4 and Nick Mathewson <a href="https://lists.torproject.org/pipermail/tor-talk/2013-September/029930.html">encourages everybody to upgrade</a>.</p>

<p><a href="https://lists.torproject.org/pipermail/tor-talk/2013-September/029927.html">Another thread</a> prompted Nick to <a href="https://lists.torproject.org/pipermail/tor-talk/2013-September/029941.html">summarize</a> his views on the future of Tor cryptography. Regarding public keys, “with Tor 0.2.4, forward secrecy uses 256-bit ECC, which is certainly better, but RSA-1024 is still used in some places for signatures. I want to fix all that in 0.2.5 — see <a href="https://gitweb.torproject.org/torspec.git/blob_plain/HEAD:/proposals/220-ecc-id-keys.txt">proposal 220</a>, and George Kadianakis’ draft hidden service improvements ( <a href="https://lists.torproject.org/pipermail/tor-dev/2013-August/005279.html">descriptors</a>, <a href="https://lists.torproject.org/pipermail/tor-dev/2013-August/005280.html">identity keys</a>), and so forth.” Regarding symmetric keys, Nick wrote: “We’re using AES128. I’m hoping to move to XSalsa20 or something like it.” In response to a query, Nick clarifies that he doesn’t think AES is broken: only hard to implement right, and only provided in TLS in concert with modes that are somewhat (GCM) or fairly (CBC) problematic.</p>

<p>The effort to design better cryptography for the Tor protocols is not new. More than a year ago, Nick Mathewson presented <a href="https://gitweb.torproject.org/torspec.git/blob_plain/HEAD:/proposals/202-improved-relay-crypto.txt">proposal 202</a> outlining two possible new relay encryption protocols for Tor cells. Nick mentioned that he’s waiting for a promising paper to get finished here before implementation.</p>

<p>A <a href="https://lists.torproject.org/pipermail/tor-talk/2013-September/029933.html">third question was raised</a> regarding the trust in algorithms certified by the <a href="https://en.wikipedia.org/wiki/National_Institute_of_Standards_and_Technology">US NIST</a>. Nick’s speculations put aside, he also <a href="https://lists.torproject.org/pipermail/tor-talk/2013-September/029937.html">emphasized</a> that several NIST algorithms were “hard to implement correctly”.</p>

<p>Nick also <a href="https://lists.torproject.org/pipermail/tor-talk/2013-September/029929.html">plans to change more algorithms</a>: “Over the 0.2.5 series, I want to move even more things (including hidden services) to curve25519 and its allies for public key crypto. I also want to add more hard-to-implement-wrong protocols to our mix: Salsa20 is looking like a much better choice to me than AES nowadays, for instance.”</p>

<p>Nick concluded one of his emails with the words: “these are interesting times for crypto”, which sounds like a good way to put it.</p>

<h1>Toward a better performance measurement tool</h1>

<p>“I just finished […] sketching out the requirements and a software design for a new Torperf implementation“ <a href="https://lists.torproject.org/pipermail/tor-dev/2013-September/005386.html">announced</a> Karsten Loesing on the tor-dev mailing list.</p>

<p>The report begins with: “Four years ago, we presented a simple tool to measure performance of the Tor network. This tool, called Torperf, requests static files of three different sizes over the Tor network and logs timestamps of various request substeps. These data turned out to be quite useful to observe user-perceived network <a href="https://metrics.torproject.org/performance.html">performance over time</a>. However, static file downloads are not the typical use case of a user browsing the web using Tor, so absolute numbers are not very meaningful. Also, Torperf consists of a bunch of shell scripts which makes it neither very user-friendly to set up and run, nor extensible to cover new use cases.”</p>

<p>The specification lays out the various requirements for the new tool, and details several experiments like visiting high profile websites with an automated graphical web browser, downloading static files, crafting a canonical web page, measuring hidden service performance, and checking on upload capacity.</p>

<p>Karsten added “neither the requirements nor the software design are set in stone, and the implementation, well, does not exist yet. Plenty of options for giving feedback and helping out, and most parts don’t even require specific experience with hacking on Tor. Just in case somebody’s looking for an introductory Tor project to hack on.”</p>

<p>Sathya already <a href="https://lists.torproject.org/pipermail/tor-dev/2013-September/005388.html">wrote</a> that this was enough material to get the implementation started. The project needs enough work that anyone interested should get involved. Feel free to join him!</p>

<h1>More monthly status reports for August 2013</h1>

<p>The wave of regular monthly reports from Tor project members continued this week with <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000326.html">Sukhbir Singh</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000327.html">Matt Pagan</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000328.html">Ximin Luo</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000329.html">mrphs</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000330.html">Pearl Crescent</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000331.html">Andrew Lewman</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000332.html">Mike Perry</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000333.html">Kelley Misata</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000334.html">Nick Mathewson</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000335.html">Jason Tsai</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000336.html">Tails</a>, <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000337.html">Aaron</a>, and <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000338.html">Damian Johnson</a>.</p>

<h1>Miscellaneous news</h1>

<p>Not all new Tor users are computer programs! According to their <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000336.html">latest report</a>, Tails is now booted twice as much as it was six months ago (from 100,865 to 190,521 connections to the security feed).</p>

<p>Thanks to <a href="http://enn.lu/">Frenn vun der Enn</a> for setting up a <a href="https://lists.torproject.org/pipermail/tor-mirrors/2013-September/000351.html">new mirror</a> of the Tor project website.</p>

<p>With the Google Summer of Code ending in two weeks, the students have sent their penultimate reports: Kostas Jakeliunas for the <a href="https://lists.torproject.org/pipermail/tor-dev/2013-September/005380.html">Searchable metrics archive</a>, Johannes Fürmann for <a href="https://lists.torproject.org/pipermail/tor-dev/2013-September/005394.html">EvilGenius</a>, Hareesan for the <a href="https://lists.torproject.org/pipermail/tor-dev/2013-September/005409.html">Steganography Browser Extension</a>, and Cristian-Matei Toader for <a href="https://lists.torproject.org/pipermail/tor-dev/2013-September/005412.html">Tor capabilities </a>.</p>

<p>Damian Johnson <a href="https://lists.torproject.org/pipermail/tor-reports/2013-September/000338.html">announced</a> that he had completed the rewrite of <a href="https://gitweb.torproject.org/doctor.git">DocTor</a> in Python, “a service that pulls hourly consensus information and checks it for a host of issues (directory authority outages, expiring certificates, etc). In the case of a problem it notifies
 <a href="https://lists.torproject.org/cgi-bin/mailman/listinfo/tor-consensus-health">tor-consensus-health@</a>, and we in turn give the authority operator a heads up.”</p>

<p>Matt Pagan has <a href="https://svn.torproject.org/cgi-bin/viewvc.cgi/Tor?view=revision&amp;revision=26333">migrated</a> several <a href="https://www.torproject.org/docs/faq.html">Frequently-Asked Questions</a> from the wiki to the official Tor website. This should enable more users to find the answers they need!</p>

<p>In his <a href="https://lists.torproject.org/pipermail/tor-relays/2013-August/002477.html">previous call for help to collect more statistics</a>, addressed to bridge operators, George Kadianakis forgot to mention that an extra line with “ExtORPort 6669” <a href="https://lists.torproject.org/pipermail/tor-relays/2013-September/002691.html">needed to be added to the tor configuration file</a>. Make sure you do have it if you are running a bridge on the tor master branch.</p>

<p>For the upgrade of tor to the 0.2.4.x series in Tails, a tester <a href="https://mailman.boum.org/pipermail/tails-dev/2013-September/003617.html">spotted a regression</a> while “playing with an ISO built from experimental, thanks to our Jenkins autobuilder”. This marks a significant milestone in the work on <a href="https://labs.riseup.net/code/issues/5324">automated builds</a> done by several members of the Tails team in the course of the last year!</p>

<p>Tails’ <a href="https://mailman.boum.org/pipermail/tails-dev/2013-September/003566.html">next “low-hanging fruit” session</a> will be on September 21st at 08:00 UTC. Mark the date if you want to get involved!</p>

<p>David Fifield gave some tips on <a href="https://lists.torproject.org/pipermail/tor-dev/2013-September/005402.html">how to setup a test infrastructure</a> for <a href="https://crypto.stanford.edu/flashproxy/">flash proxy</a>.</p>

<p>Marek Majkowski <a href="https://lists.torproject.org/pipermail/tor-dev/2013-September/005403.html">reported</a> on how one can use his <a href="https://github.com/majek/fluxcapacitor.git">fluxcapacitor</a> tool to get a test Tor network started with <a href="https://gitweb.torproject.org/chutney.git">Chutney</a> ready in only 6.5 seconds. A vast improvement over the 5 minutes he <a href="https://lists.torproject.org/pipermail/tor-dev/2013-September/005413.html">initially</a> had to wait!</p>

<p>Eugen Leitl <a href="https://lists.torproject.org/pipermail/tor-talk/2013-September/029856.html">drew attention</a> to a <a href="http://cryptome.org/2013/09/tor-analysis-hidden-services.pdf">new research paper</a> which aims to analyze the content and popularity of Hidden Services by Alex Biryukov, Ivan Pustogarov, and Ralf-Philipp Weinmann from the University of Luxembourg.</p>

<h1>Tor Help Desk roundup</h1>

<p>The Tor help desk had a number of emails this week asking about the recent stories in the New York Times, the Guardian, and ProPublica regarding NSA’s cryptographic capabilities. Some users asked whether there was a backdoor in Tor. Others asked if Tor’s crypto was broken.</p>

<p>There is absolutely no backdoor in Tor. Tor project members have been <a href="https://blog.torproject.org/blog/calea-2-and-tor">vocal in the past</a> about how tremendously irresponsible it would be to backdoor our users. As it is a frequently-asked question, users have been encouraged to read <a href="http://www.torproject.org/docs/faq.html.en#Backdoor">how the project would respond to institutional pressure</a>.</p>

<p>The Tor project does not have any more facts about NSA’s cryptanalysis capabilities than what has been published in newspapers. Even if there is no actual evidence that Tor encryption is actually broken, the idea is to remain on the safe side by using more trusted algorithms for the Tor protocols. See above for a more detailed write-up.</p>

<h1>Help the Tor community!</h1>

<p>Tor is about protecting everyone’s freedom and privacy. There are <a href="https://www.torproject.org/getinvolved/volunteer.html.en">many ways to help</a> but getting involved in such a busy community can be daunting. Here’s a selection of tasks on which one could get started:</p>

<p><a href="https://bugs.torproject.org/9698">Get tor to log the source of control port connections</a>. It would help in developing controller applications or libraries (like Stem ) to know which program is responsible for a given access to the control facilities of the tor daemon. Knowledge required: C programming, basic understanding of network sockets.</p>

<p><a href="https://lists.torproject.org/pipermail/tor-dev/2013-September/005417.html">Diagnose what is currently wrong with Tor Cloud images</a>. <a href="https://cloud.torproject.org/">Tor Cloud</a> is an easy way to deploy bridges and it looks like the automatic upgrade procedure caused problems. Let’s make these virtual machines useful again for censored users. Knowledge required: basic understanding of Ubuntu system administration.</p>

<hr>

<p>This issue of Tor Weekly News has been assembled by Lunar, dope457, mttp, malaparte, harmony, Karsten Loesing, and Nick Mathewson.</p>

<p>Want to continue reading TWN? Please help us create this newsletter. We still need more volunteers to watch the Tor community and report important news. Please see the <a href="https://trac.torproject.org/projects/tor/wiki/TorWeeklyNews">project page</a>, write down your name and subscribe to the <a href="https://lists.torproject.org/cgi-bin/mailman/listinfo/news-team">team mailing list</a> if you want to get involved!</p>

        </div>
      </section>
    
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="/blog/tor-nsa-gchq-and-quick-ant-speculation">Tor, NSA, GCHQ, and QUICK ANT Speculation</a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">phobos</a> under
              
                <a class="post-category post-category-js" href="#">gchq</a>
              
                <a class="post-category post-category-js" href="#">nsa</a>
              
                <a class="post-category post-category-js" href="#">quick ant</a>
              
                <a class="post-category post-category-js" href="#">snowden leaks</a>
              
                <a class="post-category post-category-js" href="#">speculation</a>
              
                <a class="post-category post-category-js" href="#">tor</a>
               |
              11 Sep 2013
          </p>
        </header>
        <div class="post-description">
          <p>Many Tor users and various press organizations are asking about <a href="https://people.torproject.org/%7Eandrew/2013-09-10-quick-ant-tor-events-qfd.png">one slide in a Brazillian TV broadcast</a>. A graduate student in law and computer science at Stanford University, Jonathan Mayer, then <a href="https://twitter.com/jonathanmayer/status/377292928718499841">speculated on what this &quot;QUICK ANT&quot; could be</a>. Since then, we&#39;ve heard all sorts of theories.</p>

<p>We&#39;ve seen the same slides as you and Jonathan Mayer have seen. It&#39;s not clear what the NSA or GCHQ can or cannot do. It&#39;s not clear if they are &quot;cracking&quot; the various crypto used in Tor, or merely tracking Tor exit relays, Tor relays as a whole, or run their own private Tor network.</p>

<p>What we do know is that if someone can watch the entire Internet all at once, they can watch traffic enter tor and exit tor. This likely de-anonymizes the Tor user. We <a href="https://www.torproject.org/docs/faq.html.en#AttacksOnOnionRouting">describe the problem as part of our FAQ</a>.</p>

<p>We think the most likely explanation here is that they have some &quot;Tor flow detector&quot; scripts that let them pick Tor flows out of a set of flows they&#39;re looking at. This is basically the same problem as the blocking-resistance problem — they could do it by IP address (&quot;that&#39;s a known Tor relay&quot;), or by traffic fingerprint (&quot;that looks like TLS but look here and here how it&#39;s different&quot;), etc.</p>

<p>It&#39;s unlikely to have anything to do with deanonymizing Tor users, except insofar as they might have traffic flows from both sides of the circuit in their database. However, without concrete details, we can only speculate as well. We&#39;d rather spend our time developing Tor and conducting research to make a better Tor.</p>

<p>Thanks to Roger and Lunar for edits and feedback on this post.</p>

        </div>
      </section>
    
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="/blog/lifecycle-of-a-new-relay">The lifecycle of a new relay</a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">arma</a> under
              
                <a class="post-category post-category-js" href="#">anonymity</a>
              
                <a class="post-category post-category-js" href="#">entry guards</a>
              
                <a class="post-category post-category-js" href="#">research</a>
               |
              11 Sep 2013
          </p>
        </header>
        <div class="post-description">
          <p>Many people set up new fast relays and then wonder why their bandwidth is not fully loaded instantly. In this post I&#39;ll walk you through the lifecycle of a new fast <a href="https://www.torproject.org/docs/faq#ExitPolicies">non-exit</a> relay, since Tor&#39;s bandwidth estimation and load balancing has gotten much more complicated in recent years. I should emphasize that the descriptions here are in part anecdotal — at the end of the post I ask some research questions that will help us make better sense of what&#39;s going on.</p>

<p>I hope this summary will be useful for relay operators. It also provides background for understanding some of the anonymity analysis research papers that people have been asking me about lately. In an upcoming blog post, I&#39;ll explain why we need to raise the guard rotation period (and what that means) to improve Tor&#39;s anonymity. [Edit: <a href="https://blog.torproject.org/blog/improving-tors-anonymity-changing-guard-parameters">here is that blog post</a>]</p>

<p>A new relay, assuming it is reliable and has plenty of bandwidth, goes through four phases: the unmeasured phase (days 0-3) where it gets roughly no use, the remote-measurement phase (days 3-8) where load starts to increase, the ramp-up guard phase (days 8-68) where load counterintuitively drops and then rises higher, and the steady-state guard phase (days 68+).</p>

<p><a href="https://people.torproject.org/%7Earma/lifecycle-blog.png">
 <img src="https://people.torproject.org/%7Earma/lifecycle-blog.png" alt="The phases of a new relay"></a></p>

<p><strong>Phase one: unmeasured (days 0-3).</strong></p>

<p>When your relay first starts, it does a bandwidth self-test: it builds four circuits into the Tor network and back to itself, and then sends 125KB over each circuit. This step bootstraps Tor&#39;s passive bandwidth measurement system, which estimates your bandwidth as the largest burst you&#39;ve done over a 10 second period. So if all goes well, your first self-measurement is 4*125K/10 = 50KB/s. Your relay publishes this number in your relay descriptor.</p>

<p>The <a href="https://www.torproject.org/docs/faq#KeyManagement">directory authorities</a> list your relay in the network consensus, and clients get good performance (and balance load across the network) by choosing relays proportional to the bandwidth number listed in the consensus.</p>

<p>Originally, the directory authorities would just use whatever bandwidth estimate you claimed in your relay descriptor. As you can imagine, that approach made it <a href="http://freehaven.net/anonbib/#bauer:wpes2007">cheap</a> for even a small adversary to attract a lot of traffic by simply lying. In 2009, Mike Perry deployed the <a href="https://blog.torproject.org/blog/torflow-node-capacity-integrity-and-reliability-measurements-hotpets">&quot;bandwidth authority&quot;</a> scripts, where a group of fast computers around the Internet (called bwauths) do active measurements of each relay, and the directory authorities <a href="https://gitweb.torproject.org/torflow.git/blob/HEAD:/NetworkScanners/BwAuthority/README.BwAuthorities">adjust the consensus bandwidth up or down</a> depending on how the relay compares to other relays that advertise similar speeds. (Technically, we call the consensus number a &quot;weight&quot; rather than a bandwidth, since it&#39;s all about how your relay&#39;s number compares to the other numbers, and once we start adjusting them they aren&#39;t really bandwidths anymore.)</p>

<p>The bwauth approach isn&#39;t ungameable, but it&#39;s a lot better than the old design. Earlier this year we plugged another vulnerability by capping your consensus weight to 20KB until a threshold of bwauths have an opinion about your relay — otherwise there was a <a href="https://trac.torproject.org/projects/tor/ticket/2286">several-day window</a> where we would use your claimed value because we didn&#39;t have anything better to use.</p>

<p>So that&#39;s phase one: your new relay gets basically no use for the first few days of its life because of the low 20KB cap, while it waits for a threshold of bwauths to measure it.</p>

<p><strong>Phase two: remote measurement (days 3-8).</strong></p>

<p>Remember how I said the bwauths adjust your consensus weight based on how you compare to similarly-sized relays? At the beginning of this phase your relay hasn&#39;t seen much traffic, so your peers are the other relays who haven&#39;t seen (or can&#39;t handle) much traffic. Over time though, a few clients will build circuits through your relay and push some traffic, and the passive bandwidth measurement will provide a new larger estimate. Now the bwauths will compare you to your new (faster) peers, giving you a larger consensus weight, thus driving more clients to use you, in turn raising your bandwidth estimate, and so on.</p>

<p>Tor clients generally make three-hop circuits (that is, paths that go through three relays). The first position in the path, called the guard relay, is special because it helps protect against a certain anonymity-breaking attack. Here&#39;s the attack: if you keep picking new paths at random, and the adversary runs a few relays, then over time the chance drops to zero that *every single path you&#39;ve made* is safe from the adversary. The <a href="http://freehaven.net/anonbib/#hs-attack06">defense</a> is to choose a small number of relays (called guards) and always use one of them for your first hop — either you chose wrong, and one of your guards is run by the adversary and you lose on many of your paths; or you chose right and all of your paths are safe. Read the <a href="https://www.torproject.org/docs/faq#EntryGuards">Guard FAQ</a> for more details.</p>

<p>Only <a href="https://gitweb.torproject.org/torspec.git/blob/HEAD:/dir-spec.txt#l1768">stable and reliable</a> relays can be used as guards, so no clients are willing to use your brand new relay as their first hop. And since in this story you chose to set up a non-exit relay (so you won&#39;t be the one actually making connections to external services like websites), no clients will use it as their third hop either. That means all of your relay&#39;s traffic is coming from being the second hop in circuits.</p>

<p>So that&#39;s phase two: once the bwauths have measured you and the directory authorities lift the 20KB cap, you&#39;ll attract more and more traffic, but it will still be limited because you&#39;ll only ever be a middle hop.</p>

<p><strong>Phase three: Ramping up as a guard relay (days 8-68).</strong></p>

<p>This is the point where I should introduce consensus flags. Directory authorities assign the <a href="https://gitweb.torproject.org/torspec.git/blob/HEAD:/dir-spec.txt#l1685">Guard flag</a> to relays based on three characteristics: &quot;bandwidth&quot; (they need to have a large enough consensus weight), &quot;weighted fractional uptime&quot; (they need to be working most of the time), and &quot;time known&quot; (to make attacks more expensive, we don&#39;t want to give the Guard flag to relays that haven&#39;t been around a while first). This last characteristic is most relevant here: on today&#39;s Tor network, you&#39;re first eligible for the Guard flag on day eight.</p>

<p>Clients will only be willing to pick you for their first hop if you have the &quot;Guard&quot; flag. But here&#39;s the catch: once you get the Guard flag, all the rest of the clients back off from using you for their middle hops, because when they see the Guard flag, they assume that you have plenty of load already from clients using you as their first hop. Now, that assumption will become true in the steady-state (that is, once enough clients have chosen you as their guard node), but counterintuitively, as soon as you get the Guard flag you&#39;ll see a dip in traffic.</p>

<p>Why do clients avoid using relays with the Guard flag for their middle hop? Clients look at the scarcity of guard capacity, and the scarcity of exit capacity, and proportionally avoid using relays for positions in the path that aren&#39;t scarce. That way we <a href="https://gitweb.torproject.org/torspec.git/blob/HEAD:/dir-spec.txt#l2014">allocate available resources best</a>: relays with the Exit flag are used mostly for exiting when they&#39;re scarce, and relays with the Guard flag are used mostly for entering when they&#39;re scarce.</p>

<p>It isn&#39;t optimal to allow this temporary dip in traffic (since we&#39;re not taking advantage of resources that you&#39;re trying to contribute), but it&#39;s a short period of time overall: clients rotate their guards nodes every 4-8 weeks, so pretty soon some of them will rotate onto your relay.</p>

<p>To be clear, there are two reasons why we have clients rotate their guard relays, and the reasons are two sides of the same coin: first is the above issue where new guards wouldn&#39;t see much use (since only new clients, picking their guards for the first time, would use a new guard), and second is that old established guards would accrue an ever-growing load since they&#39;d have the traffic from all the clients that ever picked them as their guard.</p>

<p>One of the reasons for this blog post is to give you background so when I later explain why we need to extend the guard rotation period to many months, you&#39;ll understand why we can&#39;t just crank up the number without also <a href="https://trac.torproject.org/projects/tor/ticket/9321">changing some other parts of the system</a> to keep up. Stay tuned for more details there, or if you don&#39;t want to wait you can read the <a href="https://blog.torproject.org/blog/research-problem-better-guard-rotation-parameters">original research questions</a> and the followup research papers by <a href="http://freehaven.net/anonbib/#wpes12-cogs">Elahi et al</a> and <a href="http://freehaven.net/anonbib/#ccs2013-usersrouted">Johnson et al</a>.</p>

<p><strong>Phase four: Steady-state guard relay (days 68+).</strong></p>

<p>Once your relay has been a Guard for the full guard rotation period (up to 8 weeks in Tor 0.1.1.11-alpha through 0.2.4.11-alpha, and up to 12 weeks in Tor 0.2.4.12-alpha and later), it should reach steady-state where the number of clients dropping it from their guard list balances the number of clients adding it to their guard list.</p>

<p><strong>Research question: what do these phases look like with real-world data?</strong></p>

<p>All of the above explanations, including the graphs, are just based on anecdotes from relay operators and from ad hoc examination of consensus weights.</p>

<p>Here&#39;s a great class project or thesis topic: using our publically available <a href="https://metrics.torproject.org/data.html">Tor network metrics data</a>, track the growth pattern of consensus weights and bandwidth load for new relays. Do they match the phases I&#39;ve described here? Are the changes inside a given phase linear like in the graphs above, or do they follow some other curve?</p>

<p>Are there trends over time, e.g. it used to take less time to ramp up? How long are the phases in reality — for example, does it really take three days before the bwauths have a measurement for new relays?</p>

<p>How does the scarcity of Guard or Exit capacity influence the curves or trends? For example, when guard capacity is less scarce, we expect the traffic dip at the beginning of phase three to be less pronounced.</p>

<p>How different were things before we added the 20KB cap in the first phase, or before we did remote measurements at all?</p>

<p>Are the phases, trends, or curves different for exit relays than for non-exit relays?</p>

<p>The &quot;steady-state&quot; phase assumes a constant number of Tor users: in situations where many new users appear (like the <a href="https://blog.torproject.org/blog/how-to-handle-millions-new-tor-clients">botnet invasion in August 2013</a>), current guards will get unbalanced. How quickly and smoothly does the network rebalance as clients shift guards after that?</p>

        </div>
      </section>
    
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="/blog/new-tor-02417-rc-packages">New Tor 0.2.4.17-rc packages</a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">erinn</a> under
              
                <a class="post-category post-category-js" href="#">tbb</a>
              
                <a class="post-category post-category-js" href="#">tor</a>
              
                <a class="post-category post-category-js" href="#">tor browser bundle</a>
              
                <a class="post-category post-category-js" href="#">updates</a>
               |
              06 Sep 2013
          </p>
        </header>
        <div class="post-description">
          <p>There&#39;s a new <a href="https://lists.torproject.org/pipermail/tor-talk/2013-August/029344.html">Tor 0.2.4.17-rc</a> to hopefully help mitigate some of the problems with the <a href="http://blog.fox-it.com/2013/09/05/large-botnet-cause-of-recent-tor-network-overload/">botnet</a> <a href="https://blog.torproject.org/blog/how-to-handle-millions-new-tor-clients">issues</a> Tor is experiencing. All packages, including the beta Tor Browser Bundles, have been updated. Relay operators are strongly encouraged to upgrade to the latest versions, since it mostly has server-side improvements in it, but users will hopefully benefit from upgrading too. Please try it out and let us know.</p>

<p><a href="https://www.torproject.org/projects/torbrowser.html.en#downloads" title="https://www.torproject.org/projects/torbrowser.html.en#downloads">https://www.torproject.org/projects/torbrowser.html.en#downloads</a></p>

<p><strong>Tor Browser Bundle (2.4.17-beta-1)</strong></p>

<ul>
<li>Update Tor to 0.2.4.17-rc</li>
<li>Update NoScript to 2.6.7.1</li>
<li>Update HTTPS Everywhere to 4.0development.11</li>
</ul>

        </div>
      </section>
    

     <!-- Pagination links -->
    <div class="pagination">
      
        <a href="/blog/page24" class="previous">Previous</a>
      
      <span class="page_number ">Page: 25 of 133</span>
      
        <a href="/blog/page26" class="next">Next</a>
      
    </div>
  </div>

</div>


            <div class="footer">
                <div class="pure-menu pure-menu-horizontal pure-menu-open">
                    <ul>
                        <li><a href="http://purecss.io/">About</a></li>
                        <li><a href="http://twitter.com/yuilibrary/">Twitter</a></li>
                        <li><a href="http://github.com/yahoo/pure/">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
