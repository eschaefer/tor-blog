<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>The Tor Project Blog</title>
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="/blog/page70/">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">The Tor Project Blog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
	<a class="page-link" href="/">Blog Home</a>
        <a class="page-link" href="/archive">Archives</a>
	<a class="page-link" href="https://www.torproject.org/about/overview">About Tor</a>
        <a class="page-link donate" href="https://www.torproject.org/donate/donate">Donate</a>

      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <!-- Pages with side column need a 'maincol' class -->
<div class="home maincol">

    <ul class="post-content">
	
	<li>
	  <h2>
	    <a class="post-link" href="/blog/tor-and-beast-ssl-attack">Tor and the BEAST SSL attack</a>
	  </h2>
	  <span class="post-meta">Posted Sep 24, 2011 by <a class="post-author" href="nickm">nickm</a> in 
	      
		  <a class="post-category post-category-js" href="/tag/internals">internals</a>
              
		  <a class="post-category post-category-js" href="/tag/security">security</a>
              
		  <a class="post-category post-category-js" href="/tag/ssl">ssl</a>
              
          </span>

          <div class="post-description">
	      <p>Today, Juliano Rizzo and Thai Duong presented a new attack on TLS Ekoparty security conference in Buenos Aires. Let&#39;s talk about how it works, and how it relates to the Tor protocol.</p>

<p>Short version: Don&#39;t panic. The Tor software itself is just fine, and the free-software browser vendors look like they&#39;re responding well and quickly. I&#39;ll be talking about why Tor is fine; I&#39;ll bet that the TBB folks will have more to say about browsers sometime soon.</p>

<p>There is some discussion of the attack and responses to it out there already, written by <a href="http://www.schneier.com/blog/archives/2011/09/man-in-the-midd_4.html">seriously smart cryptographers</a> and <a href="http://www.imperialviolet.org/2011/09/23/chromeandbeast.html">high-test browser security people</a>. But I haven&#39;t seen anything out there yet that tries to explain what&#39;s going on for people who don&#39;t know TLS internals and CBC basics.</p>

<p>So I&#39;ll do my best. This blog post also assumes that <em>I</em> understand the attack. Please bear with me if I&#39;m wrong about that.</p>

<p>Thanks to the authors of the paper for letting me read it and show it to other Tor devs. Thanks also to Ralf-Philipp Weinmann for helping me figure the analysis out.</p>

<h2>The attack</h2>

<h3>How the attack works: Basic background</h3>

<p>This writeup assumes that you know a little bit of computer stuff, and you know how xor works.</p>

<p>Let&#39;s talk about block ciphers, for starters. A <a href="http://en.wikipedia.org/wiki/Block_cipher">block cipher</a> is a cryptographic tool that encrypts a small chunk of plaintext data into a same-sized chunk of encrypted data, based on a secret key.</p>

<p>In practice, you want to encrypt more than just one chunk of data with your block cipher at a time. What do you do if you have a block cipher with a 16-byte block (like AES), when you need to encrypt a 256-byte message? When most folks first consider this problem, they say something like &quot;Just split the message into 16-byte chunks, and encrypt each one of those.&quot; That&#39;s an old idea (it&#39;s called ECB, or &quot; <a href="http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29">electronic codebook</a>&quot;), but it has some serious problems. Most significantly, if the same 16-byte block appears multiple times in the plaintext, the ciphertext will also have identical blocks in the same position. The Wikipedia link above has a cute demonstration of this.</p>

<p>Okay, so nobody reasonable uses ECB. Some people, though, do use a mode called CBC, or &quot; <a href="http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29">Cipher Block Chaining</a>.&quot; With CBC, when you want to encrypt a message, you start your ciphertext message with a single extra random block, or IV (&quot;initialization vector&quot;). Now, when you go to encrypt each plaintext block to get its ciphertext block, you first <a href="http://en.wikipedia.org/wiki/Xor">xor</a> the plaintext with the previous ciphertext. (So you xor the IV with the first plaintext block, encrypt that, and output it. Then you xor that ciphertext block with the second plaintext block, encrypt that, output it, and so on. The Wikipedia page has pretty good examples and illustrations here too.)</p>

<p>TLS and its earlier incarnation, SSL, are the encryption protocols that many applications, including Tor, use to send streams of encrypted data. They use CBC mode for most of their block ciphers. Unfortunately, before TLS version 1.1, they made a bad mistake. Instead of using a new random IV for every TLS message they sent, they used the ciphertext of the last block of the last message as the IV for the next message.</p>

<p>Here&#39;s why that&#39;s bad. The IV is not just supposed to be random-looking; it also needs to be something that an attacker cannot predict. If I know that you are going to use IV x for your next message, and I can trick you into sending a message that starts with a plaintext block of [(NOT x) xor y], then you will encrypt y for me.</p>

<p>That doesn&#39;t sound too bad. But <a href="http://www.mail-archive.com/openssl-dev@openssl.org/msg10664.html">Wei Dai</a> and <a href="http://eprint.iacr.org/2004/111.pdf">Gregory V. Bard</a> both found ways to exploit this to learn whether a given ciphertext block corresponds to a given plaintext. The attacker makes the user encrypt C&#39; xor p, where p is the guessed plaintext and C&#39; is the ciphertext block right before where the attacker thinks that plaintext was. If the attacker guessed right, then the user&#39;s SSL implementation outputs the same ciphertext as it did when it first encrypted that block.</p>

<p>And even <strong>that</strong> doesn&#39;t sound too bad, even in retrospect. In order to mount this attack, an adversary would need to be watching your internet connection, and be able to force you to start your next TLS record with a given string of his choice, and be able to guess something sensitive that you said earlier, and guess which part of your TLS stream might have corresponded to it.</p>

<p>Nevertheless, crypto people implemented workarounds. Better safe than sorry! In version 1.1 of the TLS protocol, every record gets a fresh IV, so the attacker can&#39;t know the IV of the next message in advance. And OpenSSL implemented a fix where, whenever they&#39;re about to send a TLS record, they send an empty TLS record immediately before, and then send the record with the message in it. The empty TLS record is enough to make the CBC state change, effectively giving the real message a new IV that the attacker can&#39;t predict.</p>

<p>These fixes haven&#39;t gotten very far in the web world, though. TLS 1.1 isn&#39;t widely implemented or deployed, even though the standard has been out since 2006. And
OpenSSL&#39;s &quot;empty record&quot; trick turns out to break some non-conformant SSL implementations, so lots of folks turn it off. (The OpenSSL manual page for the option in question even says that &quot;it is usually safe&quot; to do so.)</p>

<p>I suppose that, at the time, this seemed pretty reasonable. Guessing a plaintext is hard: there are something like 3.4 x 10^38 possible values. But as they say, attacks only get better.</p>

<h3>How the attack works: What&#39;s new as of today</h3>

<p>Juliano Rizzo and Thai Duong have two contributions, as I see it. (And please correct me if I&#39;m getting this wrong; I have not read the literature closely!) First, they came up with a scenario to implement a pretty clever variation of Dai&#39;s original attack.</p>

<p>Here&#39;s a simplified version, not exactly as Rizzo and Duong present it. Let&#39;s suppose that, for some reason, the user has a secret (like a web cookie) that they send in every TLS record. And let&#39;s assume also that the attacker can trick the user into inserting any number of characters in their plaintext at the start of the record right before the secret. So the plaintext for every record is &quot;Evil | Secret&quot;, where Evil is what the attacker chooses, and Secret is the secret message. Finally, let&#39;s suppose that the attacker can make the user send as many records as he wants.</p>

<p>The ability to decide where block boundaries fall turns out to be a big deal. Let&#39;s suppose that instead of filling up a full plaintext block with 16 bytes of Evil, the attacker only fills up 15 bytes... so the block will have 15 bytes the attacker controls, and one byte of the secret.</p>

<p>Whoops! There are only 256 possible values for a single byte, so the attacker can guess each one in turn, and use the older guess-checking attack to see if he guessed right. And once the attacker knows the first byte, he starts sending records with 14 attacker-controlled bytes, one byte that he knows (because he made a bunch of guesses and used the older attack to confirm which was right), and one byte that he doesn&#39;t. Again, this block has only 256 possible values, and so guessing each one in turn is efficient.</p>

<p>They then show how to extend this to cases where the attacker doesn&#39;t actually control the start of the block, but happens to know (or is able to guess) it, and make other extensions to the attack.</p>

<p>The second neat facet of Duong and Rizzo&#39;s work is that they actually found some ways to make this attack work against web browsers. That&#39;s no mean feat! You need to find a way to trick a web client into sending requests where you control enough of the right parts of them to mount this attack, and you need to be able to do it repeatedly. It seems to have taken a lot of HTTP hackery, but it seems they managed to do it. There&#39;s more detailed information here at <a href="http://www.educatedguesswork.org/2011/09/security_impact_of_the_rizzodu.html">Eric Rescorla&#39;s blog</a>, and of course once Juliano and Thai have their paper out, there will be even more to goggle at. This is really clever stuff IMO.</p>

<p>[Disclaimer: Again, I may have made mistakes above; if so, I will correct it when I wake up in the morning, or sooner. Please double-check me if you know this work better than I do.]</p>

<h2>So, does this attack work on Tor?</h2>

<p>Nope.</p>

<p>Tor uses OpenSSL&#39;s &quot;empty fragment&quot; feature, which inserts a single empty TLS record before every record it sends. This effectively randomizes the IV of the actual records, like a low-budget TLS 1.1. So the attack is simply stopped.</p>

<p>This feature has been in OpenSSL since 0.9.6d: see item 2 in <a href="http://www.openssl.org/%7Ebodo/tls-cbc.txt">Bodo Müller&#39;s good old CBC writeup</a> for full details on how it works. It makes our SSL incompatible with some standards-non-compliant TLS implementations... but we don&#39;t really care there, since all of the TLS implementations that connect to the Tor network are OpenSSL, or are compatible with it.</p>

<p>Tor requires OpenSSL 0.9.7 or later, and has since 0.2.0.10-alpha. Amusingly, we were considering dropping our use of the empty fragment feature as &quot;probably unnecessary&quot; in 2008, but we never got around to it. I sure don&#39;t think we&#39;ll be doing that now!</p>

<p>Now, it&#39;s possible that clients we didn&#39;t write might be using other TLS implementations, but the opportunity for plaintext injection on client-&gt;relay links is much lower than on relay-&gt;relay links; see below. As far as I know, there are no Tor server implementations compatible with the current network other than ours.</p>

<p>Also, this only goes for the Tor software itself. Applications that use TLS need to watch out. Please install patches, and look for new releases if any are coming out soon.</p>

<h2>But what if...</h2>

<h3>Okay, but would it work if we didn&#39;t use OpenSSL&#39;s empty-fragment trick?</h3>

<p>For fun, what would our situation be if we weren&#39;t using openssl&#39;s empty fragment trick?</p>

<p>I&#39;m going to diverge into Tor protocol geekery here. <strong>All of the next several sections are probably irrelevant</strong> , since the OpenSSL trick above protects Tor&#39;s TLS usage already. I&#39;m just into analyzing stuff sometimes... and at the time I originally wrote this analysis, we didn&#39;t have confirmation about whether the OpenSSL empty-record trick would help or not.</p>

<p>This part will probably be a little harder to follow, and will require some knowledge of Tor internals. You can find all of our documents and specifications online at our handy <a href="https://www.torproject.org/docs/documentation.html#DesignDoc">documentation page</a> if you&#39;ve got some free time and you want to come up to speed.</p>

<p>The attack scenario that makes sense is for an attacker to be trying to decrypt stuff sent from one Tor node to another, or between a Tor node and a client. The attacker is not one of the parties on the TLS link, obviously: if they were, they&#39;d already know the plaintext and would not need to decrypt it.</p>

<p>First, let&#39;s make some assumptions to make things as easy for the attacker as possible. Let&#39;s assume that the attacker can trivially inject chosen plaintext, and can have the TLS records carve up the plaintext stream anywhere he wants.</p>

<p>(Are those assumptions reasonable? Well, it&#39;s easy to inject plaintext on a relay-&gt;relay link: sending a node an EXTEND cell will make it send any CREATE cell body that you choose, and if you have built a circuit through a node, you can cause a RELAY cell on that node to have nearly any body you want, since the body is encrypted/decrypted in counter mode. I don&#39;t see an obvious way to make a node send a chosen plaintext to a client or make a client send a chosen plaintext to a node, but let&#39;s pretend that it&#39;s easy to do that too.</p>

<p>The second assumption, about how it&#39;s easy to make the boundaries of TLS records fall wherever you want, is likely to be more contentious; see &quot;More challenges for the attacker&quot; below.)</p>

<p>Also let&#39;s assume that on the targeted link, traffic for only one client is sent. An active attacker might arrange this through a trickle attack or something.</p>

<p>I am assuming that the attacker is observing ciphertext at a targeted node or client, but not at two targeted places that allow him to see the same traffic enter and leave the network: by our threat model, any attacker who can observe two points on a circuit is assumed to win via traffic correlation attacks.</p>

<p>I am going to argue that even then, the earlier attack doesn&#39;t get the attacker anything, and the preconditions for the Duong/Rizzo attack don&#39;t exist.</p>

<h3>CLAIM 1: The earlier (Dai/Bard) attacks don&#39;t get the attacker anything against the Tor protocol</h3>

<p>There are no interesting guessable plaintexts sent by a well-behaved client or node[*] on a Tor TLS link: all are either random, nearly random, or boring from an attacker&#39;s POV.</p>

<p>[*] What if a node or client is hostile? Then it might as well just publish its plaintext straight to the attacker.</p>

<p>Argument: CREATE cell bodies contain hybrid-encrypted stuff that (except for its first bit) should be indistinguishable from random bits, or pretty close to indistinguishable from random bits. CREATED cell bodies have a DH public key and a hash: also close to indistinguishable from random. CREATE_FAST cell bodies *are* randomly generated, and CREATED_FAST cell bodies have a random value and a hash.</p>

<p>RELAY and RELAY_EARLY cell bodies are encrypted with at least one layer of AES_CTR, so they shouldn&#39;t be distinguishable from random bits either.</p>

<p>DESTROY, PADDING, NETINFO, and VERSIONS cells do not have interesting bodies. DESTROY and PADDING bodies are either 0s or random bytes, and NETINFO and VERSIONS provide only trivial information that you can learn just by connecting to a node (the time of day, its addresses, and which versions of the Tor link protocol it speaks).</p>

<p>That&#39;s cell bodies. What about their headers? A Tor cell&#39;s header has a command and a circuit ID that take up only 3 bytes. Learning the command doesn&#39;t tell you anything you couldn&#39;t notice by observing the encrypted link in the first place and doing a little traffic analysis. The link-local 2-byte circuit ID is random, and not
interesting per se, but possibly interesting if you could use it to demultiplex traffic sent over multiple circuits. I&#39;ll discuss that more below at the end of the next section.</p>

<h3>CLAIM 2: You can&#39;t do the Duong/Rizzo attack against the Tor protocol either</h3>

<p>The attack requires that some piece of sensitive information M that you want to guess be re-sent repeatedly after the attacker&#39;s chosen plaintext. That is, it isn&#39;t enough to get the target to send one TLS record containing (evil | M) -- you need to get it to send a bunch of (evil | M) records with the same M to learn much about M.</p>

<p>But in Tor&#39;s link protocol, nothing sensitive is sent more than once. Tor does not retry the same CREATE or CREATE_FAST cells, or re-send CREATED or CREATED_FAST cells. RELAY cells are encrypted with at least one layer of AES_CTR, and no RELAY cell body is sent more than once. (The same applies to RELAY_EARLY.)</p>

<p>PADDING cells have no interesting content to learn. VERSIONS and NETINFO cells are sent only at the start of the TLS connection (and their contents are boring too).</p>

<p>What about the cell headers? They contain a command and a circuit ID. If a node is working normally, you can already predict that most of the commands will be RELAY. You can&#39;t predict that any given circuit&#39;s cells will be sent reliably after yours, so you can&#39;t be sure that you&#39;ll see the same circuitID over and over... unless if you&#39;ve done a trickle attack, in which case you already know that all the cells you&#39;re seeing are coming from the same place; or if you&#39;ve lucked out and one circuit is way louder than all the others, but you would already learn that from watching the node&#39;s network. So I think that anything that is sent frequently enough to be decryptable with this method is not in fact worth decrypting. But see the next section.</p>

<h3>Hey, what if I&#39;m wrong about those cell headers?</h3>

<p>Let&#39;s pretend that I flubbed the analyis above, and that the attacker can read the command and circuitID for every cell on a link. All this allows the attacker to do is to demultiplex the circuits on the link, and better separate the traffic pattern flows that the link is multiplexing for different clients... but the attacker can&#39;t really
use this info unless the attacker can correlate it with a flow somewhere else. This requires that the attacker be watching the same traffic at two points. But if the attacker can do that, the attacker can already (we assume) do a passive correlation attack and win.</p>

<h3>And what if I&#39;m wrong entirely?</h3>

<p>Now let&#39;s imagine that I am totally wrong, and TLS is completely broken, providing no confidentiality whatsoever? (Assume that it&#39;s still providing authenticity.)</p>

<p>Of course, this is a <em>really unlikely scenario</em>, but it&#39;s neat to speculate.</p>

<p>The attacker can remove at most one layer of encryption from RELAY cells in this case, because every hop of a circuit (except sometimes the first) is created with a one-way-authenticated Diffie-Hellman handshake. (The first hop may be created with a CREATE_FAST handshake, which is not remotely secure against an attacker who can see the plaintext inside the TLS stream.) Anonymized RELAY traffic is encrypted in AES_CTR mode with keys based on at least one CREATE handshake, so the attacker can&#39;t beat it. Non-anonymized RELAY traffic (that is, tunneled directory connections) don&#39;t contain sensitive requests or information.</p>

<p>So if the attacker can use this attack to completely decrypt TLS at a single hop on a Tor circuit, they still don&#39;t win. (All they can do is demultiplex circuits, about which see above.) And for them to do this attack at multiple points on the circuit, they would have to observe those points, in which case they&#39;re already winning according to our threat model.</p>

<h3>More challenges for the attacker</h3>

<p>It&#39;s actually even a little harder to do this attack against Tor than I&#39;ve suggested.</p>

<p>First, consider bandwidth-shaping: If a node or a link is near its bandwidth limit, it will split cells in order to stay under that limit.</p>

<p>Also, on a busy node, you can&#39;t really send a cell and expect it to get decrypted and put into the next output record on a given link: there are likely to be other circuits queueing other cells for that link, and by the time your cell is sent, it&#39;s likely that they&#39;ll have sent stuff too. You can get increased priority by making a very quiet
circuit, though.</p>

<p>Finally, I don&#39;t actually think it&#39;s possible to cause chosen plaintext to appear on a client-&gt;server link.</p>

<h3>Recommendations</h3>

<p>We dodged an interesting bullet on this one: part of it was luck, and part of it was a redundant protocol design. Nevertheless, let&#39;s &quot;close the barn doors,&quot; even though the horse is still tied up, chained down, and probably sedated too.</p>

<p>First, as soon as OpenSSL 1.0.1 is out and stable, we should strongly suggest that people move to it. (It provides TLS 1.1.) We should probably build all of our packages to use it. But sadly, we&#39;ll have to think about protocol fingerprinting issues there, in case nobody else jumps onto the TLS 1.1 bandwagon with us. :/</p>

<p>We should include recommended use of the OpenSSL empty-record trick in our spec as a requirement or a strong recommendation. I&#39;ll add a note to that effect.</p>

<p>In future designs of replacements for the current RELAY and CREATE format, we should see if there are ways to prevent them from being used for chosen plaintext injection. This might not be the last attack of its kind, after all.</p>

<p>Perhaps we should put an upper bound on the circuit priority algorithm if we haven&#39;t already, so that no circuit can achieve more than a given amount of priority for being quiet, and so that you can&#39;t reliably know that your cell will be sent next on a link. But that&#39;s pretty farfetched.</p>

<h3>And in closing</h3>

<p><a href="http://www.google.com/search?q=longcat&amp;hl=en&amp;prmd=imvns&amp;tbm=isch">longpost is loooooooong</a></p>

<p>Thanks to everybody who followed along with me so far, thanks to Juliano and Thai for letting me read their paper ahead of time, and thanks to everybody who helped me write this up. And thanks especially to my lovely spouse for proofreading.</p>

<p>Now, it&#39;s a Friday evening, and if you&#39;ll excuse me, I think I&#39;m going to go off the &#39;nets for a little while.</p>
	    
	  </div>
	  	  
	  <div class="post-footer">
	      <a class="post-blog" href="nickm">nickm's Blog</a>
	      <a class="post-cmtlink" href="/blog/tor-and-beast-ssl-attack#comments">Leave a comment</a>
	  </div>
	  <br />
	  <br />
	</li>
      
	<li>
	  <h2>
	    <a class="post-link" href="/blog/academic-postdoc-phd-and-masters-positions-available-tor-related-research">Academic (Postdoc, PhD, and Master's) positions available for Tor-related research</a>
	  </h2>
	  <span class="post-meta">Posted Sep 24, 2011 by <a class="post-author" href="ian">ian</a> in 
	      
		  <a class="post-category post-category-js" href="/tag/academia">academia</a>
              
		  <a class="post-category post-category-js" href="/tag/research">research</a>
              
          </span>

          <div class="post-description">
	      <p>As more anonymous communications and PETs researchers join the academic ranks, there is an increasing availability of Tor-related research positions at the postdoctoral, PhD, and Master&#39;s levels. (Note: we prefer the term &quot;training of Highly Qualified Personnel&quot; to &quot;pyramid scheme&quot;.)</p>

<p>Steven Murdoch (at Cambridge) and I (at Waterloo) each have some such positions available. See information and links below.</p>

<ul>
<li>Ian</li>
</ul>

<dl>
<dt><strong>PhD position at Cambridge</strong></dt>
<dd>Funding is available for a PhD student to work at the University of Cambridge Computer Laboratory, on the topic of privacy enhancing technologies and anonymous communications, starting in April 2012.
<p>The sponsorship is jointly provided by Microsoft Research Cambridge and under the Dorothy Hodgkin Postgraduate Awards scheme. As such, applicants must be nationals from India, China, Hong Kong, South Africa, Brazil, Russia or <a href="http://www.oecd.org/dataoecd/32/40/43540882.pdf" rel="nofollow">countries in the developing world</a> as defined by the Development Assistance Committee of the OECD.</p>
<p>The application deadline is soon (28 October 2011), so please circulate this advertisement to anyone who you think might find it of interest.</p>
<p>Further details can be found on the <a href="http://www.admin.cam.ac.uk/offices/hr/jobs/vacancies.cgi?job=8848" rel="nofollow">University website</a>, and enquiries should be sent to <a href="mailto:Steven.Murdoch@cl.cam.ac.uk" rel="nofollow">&lt;Steven.Murdoch@cl.cam.ac.uk&gt;</a>.</p>
</dd>
<dt><strong>PhD and Master's positions at Waterloo</strong></dt>
<dd>One of the particular focuses of the Cryptography, Security, and Privacy (CrySP) group at the University of Waterloo is research into privacy-enhancing technologies and anonymous communication networks. We have much ongoing work on Tor, with an eye to improving its security, privacy, scalability, and performance.
<p>Students interested in applying for PhD and Master's research positions in the CrySP group should email Ian Goldberg <a href="mailto:iang@cs.uwaterloo.ca" rel="nofollow">&lt;iang@cs.uwaterloo.ca&gt;</a> with "Tor research position" in the subject line.</p>
</dd>
<dt><strong>Postdoc position at Waterloo</strong></dt>
<dd>The Cryptography, Security, and Privacy (CrySP) research group at the University of Waterloo is seeking applications for a postdoctoral research position in the field of privacy-enhancing technologies, preferably on the topic of privacy-preserving communications systems. This position will be held in the Cheriton School of Computer Science.
<p>Applicants must hold a PhD in a related field, and should have a proven research record, as demonstrated by publications in top security and privacy venues (such as Oakland, CCS, USENIX Security, and NDSS) and/or top venues specific to privacy-enhancing technologies (such as PETS).</p>
<p>The start date of the position is negotiable. The position may be for one or two years.</p>
<p>Applicants should submit a CV, a research plan, two or three selected papers, and the names and contact information of three references.</p>
<p>For further information about the position, or to apply, please send email to Ian Goldberg <a href="mailto:iang@cs.uwaterloo.ca" rel="nofollow">&lt;iang@cs.uwaterloo.ca&gt;</a> with "Postdoctoral position" in the subject line. Applications may be considered as they arrive.</p>
<p>See <a href="http://crysp.uwaterloo.ca/prospective/postdoc/" rel="nofollow">http://crysp.uwaterloo.ca/prospective/postdoc/</a> for more information.</p>
</dd>
</dl>
	    
	  </div>
	  	  
	  <div class="post-footer">
	      <a class="post-blog" href="ian">ian's Blog</a>
	      <a class="post-cmtlink" href="/blog/academic-postdoc-phd-and-masters-positions-available-tor-related-research#comments">Leave a comment</a>
	  </div>
	  <br />
	  <br />
	</li>
      
	<li>
	  <h2>
	    <a class="post-link" href="/blog/gsoc-2011-tails-greeter-boot-menu-tails">GSoC 2011: tails-greeter - boot menu for TAILS</a>
	  </h2>
	  <span class="post-meta">Posted Sep 16, 2011 by <a class="post-author" href="max">max</a> in 
	      
		  <a class="post-category post-category-js" href="/tag/anonymous operating systems">anonymous operating systems</a>
              
		  <a class="post-category post-category-js" href="/tag/gsoc 2011">gsoc 2011</a>
              
		  <a class="post-category post-category-js" href="/tag/tails">tails</a>
              
          </span>

          <div class="post-description">
	      <p>This is a guest post from our 2011 Google Summer of Code student, Max:</p>

<p>Throughout the summer I&#39;ve been working on &#39;tails-greeter&#39; ( <a href="https://tails.boum.org/todo/TailsGreeter/" title="https://tails.boum.org/todo/TailsGreeter/">https://tails.boum.org/todo/TailsGreeter/</a>) project for TAILS ( <a href="https://tails.boum.org" title="https://tails.boum.org">https://tails.boum.org</a>) live-cd. Essentially it&#39;s an implementation of boot-menu ( <a href="https://tails.boum.org/todo/boot_menu/" title="https://tails.boum.org/todo/boot\_menu/">https://tails.boum.org/todo/boot_menu/</a>) in a form of GDM&#39;s greeter (that little program which asks your login and password before you see your desktop).</p>

<p>The initial proposal ( <a href="http://www.google-melange.com/gsoc/proposal/review/google/gsoc2011/mx/2001" title="http://www.google-melange.com/gsoc/proposal/review/google/gsoc2011/mx/2001">http://www.google-melange.com/gsoc/proposal/review/google/gsoc2011/mx/20...</a>) was adjusted as the project developed but major ideas remained the same: to implement an extensible boot menu which is easy to include into live-cd and maintain.</p>

<p>This posed several challenges: limit on dependencies I can use (has to be in Debian Squeeze or in backports), mastering Debian packaging, working with git (which sometimes does things in... non-obvious ways). Last but not least, tails-greeter is actually only 3rd consumer of GDM&#39;s greeter API besides GDM&#39;s own greeter and gdm-commmunity-greeter ( <a href="https://launchpad.net/gdm-commmunity-greeter" title="https://launchpad.net/gdm-commmunity-greeter">https://launchpad.net/gdm-commmunity-greeter</a>). Because of that many things about the interaction with GDM are not very well documented.</p>

<p>Nevertheless, with the help from community, tails-greeter is ready to perform its duties: request language &amp; layout information, set password for user and perform login. The project is rather easy to understand (581 source lines of code according to sloccount) so it can (and probably will) be extended in the future to request more information to adapt TAILS for user needs before login.</p>

<p>There are several things which could be improved, both user-visible (data representation) and internal (login procedure). I plan to stay in touch with the community to help to make tails-greeter ready for the inclusion into TAILS.</p>
	    
	  </div>
	  	  
	  <div class="post-footer">
	      <a class="post-blog" href="max">max's Blog</a>
	      <a class="post-cmtlink" href="/blog/gsoc-2011-tails-greeter-boot-menu-tails#comments">Leave a comment</a>
	  </div>
	  <br />
	  <br />
	</li>
      
	<li>
	  <h2>
	    <a class="post-link" href="/blog/august-2011-progress-report">August 2011 Progress Report</a>
	  </h2>
	  <span class="post-meta">Posted Sep 15, 2011 by <a class="post-author" href="phobos">phobos</a> in 
	      
		  <a class="post-category post-category-js" href="/tag/anonymity research">anonymity research</a>
              
		  <a class="post-category post-category-js" href="/tag/bug fixes">bug fixes</a>
              
		  <a class="post-category post-category-js" href="/tag/feature enhancements">feature enhancements</a>
              
		  <a class="post-category post-category-js" href="/tag/obfsproxy">obfsproxy</a>
              
		  <a class="post-category post-category-js" href="/tag/progress report">progress report</a>
              
		  <a class="post-category post-category-js" href="/tag/stable release">stable release</a>
              
		  <a class="post-category post-category-js" href="/tag/tor browser bundles">tor browser bundles</a>
              
          </span>

          <div class="post-description">
	      <p>The August 2011 Progress Report is here, <a href="https://blog.torproject.org/files/2011-August-Monthly-Report.pdf" title="https://blog.torproject.org/files/2011-August-Monthly-Report.pdf">https://blog.torproject.org/files/2011-August-Monthly-Report.pdf</a>. Highlights include a new Tor stable branch, many package updates, working UPnP in MS Windows, and many other updates, bug fixes, and research results.</p>

<p>An archive of published monthly reports is available at <a href="https://archive.torproject.org/monthly-report-archive/" title="https://archive.torproject.org/monthly-report-archive/">https://archive.torproject.org/monthly-report-archive/</a>. This includes pdf and plaintext reports for 2011.</p>
	    
	  </div>
	  	  
	  <div class="post-footer">
	      <a class="post-blog" href="phobos">phobos's Blog</a>
	      <a class="post-cmtlink" href="/blog/august-2011-progress-report#comments">Leave a comment</a>
	  </div>
	  <br />
	  <br />
	</li>
      
	<li>
	  <h2>
	    <a class="post-link" href="/blog/iran-blocks-tor-tor-releases-same-day-fix">Iran blocks Tor; Tor releases same-day fix</a>
	  </h2>
	  <span class="post-meta">Posted Sep 14, 2011 by <a class="post-author" href="arma">arma</a> in 
	      
		  <a class="post-category post-category-js" href="/tag/internet censorship">internet censorship</a>
              
		  <a class="post-category post-category-js" href="/tag/iran">iran</a>
              
          </span>

          <div class="post-description">
	      <p><strong>The short version: Tor relays and bridges should upgrade to Tor 0.2.2.33 or Tor 0.2.3.4-alpha so users in Iran can reach them again.</strong></p>

<p>Yesterday morning (in our timezones — that evening, in Iran), Iran added a filter rule to their border routers that recognized Tor traffic and blocked it. Thanks to help from a variety of friends around the world, we quickly discovered how they were blocking it and released a <a href="http://archives.seul.org/tor/talk/Sep-2011/msg00187.html">new version of Tor</a> that isn&#39;t blocked. Fortunately, the fix is on the relay side: that means once enough <a href="https://torproject.org/docs/tor-doc-relay">relays</a> and <a href="https://www.torproject.org/docs/bridges">bridges</a> upgrade, the <a href="https://metrics.torproject.org/users.html?graph=direct-users&amp;start=2011-06-16&amp;end=2011-09-14&amp;country=ir&amp;dpi=72#direct-users">many tens of thousands of Tor users in Iran</a> will resume being able to reach the Tor network, without needing to change their software.</p>

<p>How did the filter work technically? Tor tries to make its traffic look like a web browser talking to an https web server, but if you look carefully enough you can tell some differences. In this case, the characteristic of Tor&#39;s SSL handshake they looked at was the expiry time for our SSL session certificates: we rotate the session certificates every two hours, whereas normal SSL certificates you get from a <a href="https://blog.torproject.org/blog/detecting-certificate-authority-compromises-and-web-browser-collusion">certificate</a> <a href="https://blog.torproject.org/blog/diginotar-debacle-and-what-you-should-do-about-it">authority</a> typically last a year or more. The fix was to simply write a larger expiration time on the certificates, so our certs have <a href="https://www.eff.org/observatory">more plausible</a> expiry times.</p>

<p>There are plenty of interesting discussion points from the research angle around how this arms race should be played. We&#39;re working on <a href="https://gitweb.torproject.org/torspec.git/blob/HEAD:/proposals/176-revising-handshake.txt">medium</a> <a href="https://gitweb.torproject.org/torspec.git/blob/HEAD:/proposals/179-TLS-cert-and-parameter-normalization.txt">term</a> and <a href="https://gitweb.torproject.org/torspec.git/blob/HEAD:/proposals/180-pluggable-transport.txt">longer term</a> solutions, but in the short term, there are other ways to filter Tor traffic like the one Iran used. Should we fix them all preemptively, meaning the next time they block us it will be through some more complex mechanism that&#39;s harder to figure out? Or should we leave things as they are, knowing there will be more blocking events but also knowing that we can solve them easily? Given that their last blocking attempt was in <a href="https://blog.torproject.org/blog/update-internet-censorship-iran">January 2011</a>, I think it&#39;s smartest to collect some more data points first.</p>

<p>It&#39;s too early to have cool graphs showing a drop in users and then the users coming back a day or so later. I&#39;ll plan to add these graphs once things play out more. [Update: <a href="https://metrics.torproject.org/users.html?graph=direct-users&amp;start=2011-07-01&amp;end=2011-09-18&amp;country=ir&amp;events=on&amp;dpi=72#direct-users">here is the graph as of Sept 16</a>]</p>
	    
	  </div>
	  	  
	  <div class="post-footer">
	      <a class="post-blog" href="arma">arma's Blog</a>
	      <a class="post-cmtlink" href="/blog/iran-blocks-tor-tor-releases-same-day-fix#comments">Leave a comment</a>
	  </div>
	  <br />
	  <br />
	</li>
      
    <p class="rss-subscribe">subscribe <a href="/feed.xml">via RSS</a></p>
    </ul>


    <!-- Pagination links -->
    
    <div class="pagination">
      <a href="/index.html">&laquo; Newest</a>
      &nbsp;

      
	<a href="/blog/page69">&laquo; Prev</a>
      
      &nbsp;

      <!-- Pagination vars -->
      
      
      
      
      
      
	  
      
      
      

	
	  <a href="../../blog/page65">65</a>
	
      

	
	  <a href="../../blog/page66">66</a>
	
      

	
	  <a href="../../blog/page67">67</a>
	
      

	
	  <a href="../../blog/page68">68</a>
	
      

	
	  <a href="../../blog/page69">69</a>
	
      

	
	  70

	
      

	
	  <a href="../../blog/page71">71</a>
	
      

	
	  <a href="../../blog/page72">72</a>
	
      

	
	  <a href="../../blog/page73">73</a>
	
      

	
	  <a href="../../blog/page74">74</a>
	
      

	
	  <a href="../../blog/page75">75</a>
	
      
      &nbsp;

      
	<a href="/blog/page71">Next &raquo;</a>
      
      &nbsp;
      <a href="../../blog/page137">Oldest &raquo;</a>
    </div>
    
    
    <br />

  </div>

<!-- Include the side column --->
<div class="sidecol">

<!-- RSS FEED / SEARCH -->
    <div class="sidefirst">
	<a href="/feed.xml"><img src="/assets/images/rss.png">RSS</a>
	<!-- <a href="#"><img src="/img/rss.png">Atom</a> -->
	<form>
        <input class="searchtext" type="text" size="10" maxlength="10"><input class="searchbutton" type="submit" value="Search">
        </form>
    </div>

<!-- EVENTS -->
    <div class ="sidebox orangebox">
	<h2>Upcoming Events</h2>
	<ul>
	    
		    <li><span><a href="/events/andrew-keynotes-broadband-world-forum">Andrew Keynotes Broadband World Forum</a></span></li>
	    
		    <li><span><a href="/events/roger-usenix-security-symposium-san-diego-ca">Roger @ Usenix Security Symposium, San Diego, CA</a></span></li>
	    
		    <li><span><a href="/events/roger-foci-%E2%80%9914-san-diego-ca">Roger @ FOCI ’14, San Diego, CA</a></span></li>
	    
		    <li><span><a href="/events/tor-pets-2014-amsterdam">Tor @ PETS 2014, Amsterdam</a></span></li>
	    
	</ul>
	<span><a href="/events">full calendar &raquo;</a></span>
    </div>
    
<!-- RECENT BLOG POSTS -->
    <div class ="sidebox greenbox">
	<h2>Recent Blog Posts</h2>
	<ul>
	  
		    <li><span><a href="/tor-weekly-news-%E2%80%94-october-8th-2014">Tor Weekly News — October 8th, 2014</a></span></li>
	  
		    <li><span><a href="/closer-look-great-firewall-china">A closer look at the Great Firewall of China</a></span></li>
	  
		    <li><span><a href="/tor-weekly-news-%E2%80%94-october-1st-2014">Tor Weekly News — October 1st, 2014</a></span></li>
	  
		    <li><span><a href="/tor-browser-40-alpha-3-released">Tor Browser 4.0-alpha-3 is released</a></span></li>
	  
		    <li><span><a href="/tor-browser-366-released">Tor Browser 3.6.6 is released</a></span></li>
	  
		    <li><span><a href="/tails-112-out">Tails 1.1.2 is out</a></span></li>
	  
		    <li><span><a href="/tor-weekly-news-%E2%80%94-september-24th-2014">Tor Weekly News — September 24th, 2014</a></span></li>
	  
		    <li><span><a href="/tor-weekly-news-%E2%80%94-september-17th-2014">Tor Weekly News — September 17th, 2014</a></span></li>
	  
		    <li><span><a href="/tor-0257-rc-out">Tor 0.2.5.7-rc is out</a></span></li>
	  
		    <li><span><a href="/tor-weekly-news-%E2%80%94-september-10th-2014">Tor Weekly News — September 10th, 2014</a></span></li>
	  
	</ul>
	<span><a href="/">more &raquo;</a></span>
    </div>
    
<!-- TAG CLOUD -->
    <div class ="tagbox orangebox">
	<h2>Blog Tag Cloud</h2>
	<ul>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 57%">
        <span><a href="/tag/blog/">
            blog
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/tag/first post/">
            first post
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 171%">
        <span><a href="/tag/tor/">
            tor
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/tag/24c3/">
            24c3
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 57%">
        <span><a href="/tag/ccc/">
            ccc
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 61%">
        <span><a href="/tag/talks/">
            talks
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 59%">
        <span><a href="/tag/bugs/">
            bugs
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 57%">
        <span><a href="/tag/crashes/">
            crashes
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 64%">
        <span><a href="/tag/osx/">
            osx
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/tag/qt/">
            qt
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 86%">
        <span><a href="/tag/vidalia/">
            vidalia
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 68%">
        <span><a href="/tag/vidalia bundle/">
            vidalia bundle
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/tag/meetup/">
            meetup
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 59%">
        <span><a href="/tag/attacks/">
            attacks
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/tag/covert channels/">
            covert channels
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 57%">
        <span><a href="/tag/media coverage/">
            media coverage
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 88%">
        <span><a href="/tag/bridges/">
            bridges
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 59%">
        <span><a href="/tag/incognito/">
            incognito
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 116%">
        <span><a href="/tag/progress report/">
            progress report
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 83%">
        <span><a href="/tag/torbrowser/">
            torbrowser
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 85%">
        <span><a href="/tag/torbutton/">
            torbutton
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 65%">
        <span><a href="/tag/china/">
            china
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 56%">
        <span><a href="/tag/directors/">
            directors
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 76%">
        <span><a href="/tag/release candidate/">
            release candidate
        </a></span>
    </li>

    <!-- this is wack - be careful adjusting these values -->
    <li style="font-size: 74%">
        <span><a href="/tag/gsoc/">
            gsoc
        </a></span>
    </li>

	</ul>
	<span><a href="/tag-cloud">more tags &raquo;</a></span>
    </div>

</div>

<div style="clear: both;"></div>  


      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">The Tor Project Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>The Tor Project Blog</li>
          <li><a href="mailto:contact@torproject.org">contact@torproject.org</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/jekyll">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">jekyll</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/jekyllrb">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">jekyllrb</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
