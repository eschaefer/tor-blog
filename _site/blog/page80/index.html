<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tor Project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example that shows off a blog page with a list of posts.">
    <meta name="robots" content="noindex" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/styles.css">

    <!--[if lte IE 8]>
      <link rel="stylesheet" href="css/blog-old-ie.css">
    <![endif]-->
    <!--[if lt IE 9]>
      <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
    <![endif]-->
</head>
<body>

<body>
<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
            <a href="/"><img class="tor-logo" src="/assets/images/tor_logo.png" alt="Tor logo" /></a>
            <h1 class="brand-title">The Tor Project Blog</h1>
            <h2 class="brand-tagline">News and events from Tor</h2>

            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="pure-button" href="/events/">Events</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="https://www.torproject.org/overview">About Tor</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="https://www.torproject.org/donate/donate">Donate</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <div class="content pure-u-1 pure-u-md-3-4">
        <div>

            <!-- A wrapper for all the blog posts -->
<div class="posts">

  <h1 class="content-subhead">Recent Posts</h1>
  <div id="home">
    
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="/blog/detecting-certificate-authority-compromises-and-web-browser-collusion">Detecting Certificate Authority compromises and web browser collusion </a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">ioerror</a> under
              
                <a class="post-category post-category-js" href="#">ssl tls ca tor certificates torbrowser</a>
               |
              23 Mar 2011
          </p>
        </header>
        <div class="post-description">
          <p><small><i>Thanks to Ian Gallagher, Seth Schoen, Jesse Burns, Chris Palmer, and other anonymous birds for their invaluable feedback on this writeup.</i></small></p>

<p>The Tor Project has long understood that the <a href="https://secure.wikimedia.org/wikipedia/en/wiki/Certificate_authority">certification authority</a> (CA) model of trust on the internet is susceptible to various methods of compromise. Without strong anonymity, the ability to perform targeted attacks with the blessing of a CA key is serious. In the past, I’ve worked on <a href="http://www.win.tue.nl/hashclash/rogue-ca/">attacks relating to SSL/TLS trust models</a> and for quite some time, I’ve hunted for evidence of non-academic CA compromise in the wild.</p>

<p>I’ve also looked for special kinds of cooperation between CAs and browsers. Proof of collusion will give us facts. It will also give us a real understanding of the faith placed in the strength of the underlying systems.</p>

<p>Does certificate revocation really work? <a href="http://www.imperialviolet.org/2011/03/18/revocation.html"><strong>No, it does not</strong></a>. How much faith does a vendor actually put into revocation, when verifiable evidence of malice is detected or known? Not much, and that’s the subject of this writing.</p>

<p>Last week, a smoking gun came into sight: A Certification Authority appeared to be compromised in some capacity, and the attacker issued themselves valid HTTPS certificates for high-value web sites. With these certificates, the attacker could impersonate the identities of the victim web sites or other related systems, probably undetectably for the majority of users on the internet.</p>

<p>I watch the Chromium and Mozilla Firefox projects carefully, because they are so important to the internet infrastructure. On the evening of 16 March, I noticed a very interesting code change to Chromium: <a href="http://src.chromium.org/viewvc/chrome/trunk/src/net/base/x509_certificate.cc?view=markup&amp;pathrev=78478">revision 78478, Thu Mar 17 00:48:21 2011 UTC</a>.</p>

<p>In this revision, the developers added X509Certificate::IsBlacklisted, which returns true if a HTTPS certificate has one of these particular serial numbers:</p>

<ul>
<li>047ecbe9fca55f7bd09eae36e10cae1e</li>
<li>d8f35f4eb7872b2dab0692e315382fb0</li>
<li>b0b7133ed096f9b56fae91c874bd3ac0</li>
<li>9239d5348f40d1695a745470e1f23f43</li>
<li>d7558fdaf5f1105bb213282b707729a3</li>
<li>f5c86af36162f13a64f54f6dc9587c06</li>
</ul>

<p>A comment marks the first as &quot;Not a real certificate. For testing only.&quot; but we don’t know if this means the other certificates are or are not also for testing.</p>

<p>With just these serial numbers, we are not able to learn much about the certificates that Chromium now blocks. To get more information, I started the <a href="https://github.com/ioerror/crlwatch">crlwatch</a> project. Nearly every certificate contains a reference to a <a href="https://secure.wikimedia.org/wikipedia/en/wiki/Revocation_list">Certificate Revocation List</a> (CRL). A CRL is a list of certificates that the CA has revoked for whatever reason. In theory, this means that an attacker is unable to tamper with the certificate to prevent revocation as the browser will check the CRL it finds in a certificate. In practice the attacker simply needs to tamper with the network - this is something they’re already able to do if they are performing a SSL/TLS Machine-In-The-Middle attack. Even if an attacker has a certificate, they generally are unable to modify the certificate without breaking the digital signature issued by the CA. That CA signature is what gives the certificate value to an attacker and tampering takes the attacker back to square zero. So while investigating these serials, we clearly lack the CRL distribution point in the Chrome source. However, the project that I announced on March 17th, crlwatch, was specifically written to assist in finding who issued, and potentially revoked the serial numbers in question. By matching the serial numbers found in the source for Chrome with the serial numbers of revoked certificates, we’re able to link specific serials to specific CA issuers. The more serial numbers we match in revocation lists, the higher our probability of having found the CA that issued the certificates.</p>

<p>About twelve hours (Thursday, March 17, 2011 | 13:00) after the above patch was pushed into source control - Google announced <a href="http://googlechromereleases.blogspot.com/2011/03/stable-and-beta-channel-updates_17.html">an important Chrome Update that involved HTTPS certificate issues</a>.</p>

<p>This also is mostly uninteresting until we notice that this is not isolated to Google. Mozilla pushed out two patches of interest:</p>

<ul>
<li><a href="http://hg.mozilla.org/mozilla-central/rev/f6215eef2276">rev-f6215eef2276</a></li>
<li><a href="http://hg.mozilla.org/mozilla-central/rev/55f344578932">rev-55f344578932</a></li>
</ul>

<p>The <a href="http://hg.mozilla.org/mozilla-central/rev/f6215eef2276">complete changeset</a> is semi-informative. Mozilla references a private bug in that fix that Mozilla will hopefully disclose. Similar to Chromium, the Mozilla patches create a list of certificate serial numbers that will be treated as invalid. However, the serial numbers from the Mozilla patches are different:</p>

<ul>
<li>009239d5348f40d1695a745470e1f23f43</li>
<li>00d8f35f4eb7872b2dab0692e315382fb0</li>
<li>72032105c50c08573d8ea5304efee8b0</li>
<li>00b0b7133ed096f9b56fae91c874bd3ac0</li>
<li>00e9028b9578e415dc1a710a2b88154447</li>
<li>00d7558fdaf5f1105bb213282b707729a3</li>
<li>047ecbe9fca55f7bd09eae36e10cae1e</li>
<li>00f5c86af36162f13a64f54f6dc9587c06</li>
<li>392a434f0e07df1f8aa305de34e0c229</li>
<li>3e75ced46b693021218830ae86a82a71</li>
</ul>

<p>Thus, both Mozilla and Google shipped similar patches to their code at roughly the same time. The two browsers now have partially overlapping certificate blocklists. Here is the union of the two lists:</p>

<ul>
<li>009239d5348f40d1695a745470e1f23f43</li>
<li>00b0b7133ed096f9b56fae91c874bd3ac0</li>
<li>00d7558fdaf5f1105bb213282b707729a3</li>
<li>00d8f35f4eb7872b2dab0692e315382fb0</li>
<li>00e9028b9578e415dc1a710a2b88154447</li>
<li>00f5c86af36162f13a64f54f6dc9587c06</li>
<li>047ecbe9fca55f7bd09eae36e10cae1e</li>
<li>392a434f0e07df1f8aa305de34e0c229</li>
<li>3e75ced46b693021218830ae86a82a71</li>
<li>72032105c50c08573d8ea5304efee8b0</li>
<li>9239d5348f40d1695a745470e1f23f43</li>
<li>b0b7133ed096f9b56fae91c874bd3ac0</li>
<li>d7558fdaf5f1105bb213282b707729a3</li>
<li>d8f35f4eb7872b2dab0692e315382fb0</li>
<li>f5c86af36162f13a64f54f6dc9587c06</li>
</ul>

<p>Why do the browsers have these blocklists, and why don’t they have the same blocklists?</p>

<p>This returns me to the reason for creating crlwatch last week - I wanted to find the someones who knowingly revoked the above listed special certificates. Anyone looking from the same starting point as I did, obviously lacks the leaf certificates in question and as a result, I had to look in a rather round about manner. Thanks to the <a href="https://www.eff.org/observatory">EFF’s SSL Observatory</a>, I was able to populate the base list for crlwatch. Armed with a nearly canonical list of all CRLs, I fetched them over <a href="https://www.torproject.org/">Tor</a> and parsed the CRL data into human readable text. The goal was to search for the above serial numbers and to find something linkable.</p>

<p>This is the result from searching the crlwatch data:</p>

<p><code>
Looking for 009239d5348f40d1695a745470e1f23f43 in parsed CRLs...
Looking for 00b0b7133ed096f9b56fae91c874bd3ac0 in parsed CRLs...
Looking for 00d7558fdaf5f1105bb213282b707729a3 in parsed CRLs...
Looking for 00d8f35f4eb7872b2dab0692e315382fb0 in parsed CRLs...
Looking for 00e9028b9578e415dc1a710a2b88154447 in parsed CRLs...
Looking for 00f5c86af36162f13a64f54f6dc9587c06 in parsed CRLs...
Looking for 047ecbe9fca55f7bd09eae36e10cae1e in parsed CRLs...
Match! Serial Number: 047ECBE9FCA55F7BD09EAE36E10CAE1E
Match! Serial Number: 047ECBE9FCA55F7BD09EAE36E10CAE1E
Match! Serial Number: 047ECBE9FCA55F7BD09EAE36E10CAE1E
Looking for 392a434f0e07df1f8aa305de34e0c229 in parsed CRLs...
Match! Serial Number: 392A434F0E07DF1F8AA305DE34E0C229
Match! Serial Number: 392A434F0E07DF1F8AA305DE34E0C229
Match! Serial Number: 392A434F0E07DF1F8AA305DE34E0C229
Looking for 3e75ced46b693021218830ae86a82a71 in parsed CRLs...
Match! Serial Number: 3E75CED46B693021218830AE86A82A71
Match! Serial Number: 3E75CED46B693021218830AE86A82A71
Match! Serial Number: 3E75CED46B693021218830AE86A82A71
Looking for 72032105c50c08573d8ea5304efee8b0 in parsed CRLs...
Looking for 9239d5348f40d1695a745470e1f23f43 in parsed CRLs...
Match! Serial Number: 9239D5348F40D1695A745470E1F23F43
Match! Serial Number: 9239D5348F40D1695A745470E1F23F43
Match! Serial Number: 9239D5348F40D1695A745470E1F23F43
Looking for b0b7133ed096f9b56fae91c874bd3ac0 in parsed CRLs...
Match! Serial Number: B0B7133ED096F9B56FAE91C874BD3AC0
Match! Serial Number: B0B7133ED096F9B56FAE91C874BD3AC0
Match! Serial Number: B0B7133ED096F9B56FAE91C874BD3AC0
Looking for d7558fdaf5f1105bb213282b707729a3 in parsed CRLs...
Match! Serial Number: D7558FDAF5F1105BB213282B707729A3
Match! Serial Number: D7558FDAF5F1105BB213282B707729A3
Match! Serial Number: D7558FDAF5F1105BB213282B707729A3
Looking for d8f35f4eb7872b2dab0692e315382fb0 in parsed CRLs...
Match! Serial Number: D8F35F4EB7872B2DAB0692E315382FB0
Match! Serial Number: D8F35F4EB7872B2DAB0692E315382FB0
Match! Serial Number: D8F35F4EB7872B2DAB0692E315382FB0
Looking for f5c86af36162f13a64f54f6dc9587c06 in parsed CRLs...
Match! Serial Number: F5C86AF36162F13A64F54F6DC9587C06
Match! Serial Number: F5C86AF36162F13A64F54F6DC9587C06
Match! Serial Number: F5C86AF36162F13A64F54F6DC9587C06
</code></p>

<p>Huzzah! It appears that we&#39;ve found a few matches!</p>

<p>Here are the three matching files in human readable format:</p>

<ul>
<li><a href="https://github.com/ioerror/crlwatch/blob/master/crl-parsed/2208d196b567691ff77bee6ed97ac6aea7825aa0.crl2txt">7825aa0.crl2txt</a></li>
<li><a href="https://github.com/ioerror/crlwatch/blob/master/crl-parsed/2454652aa76e0dcf0c7531a2ed9dbeda5c0f5dd5.crl2txt">c0f5dd5.crl2txt</a></li>
<li><a href="https://github.com/ioerror/crlwatch/blob/master/crl-parsed/5a65d440090271759080e6d0eaae0b6ccae2ff50.crl2txt">ae2ff50.crl2txt</a></li>
</ul>

<p>Matching entries in the list look like this:</p>

<p><code>
    Serial Number: 392A434F0E07DF1F8AA305DE34E0C229
        Revocation Date: Mar 15 20:15:38 2011 GMT
</code></p>

<p>An interesting note is that this date is a bit earlier than the above patches. The CA knew to revoke it on March 15th and the above patches were worked into software a few days later. If the attacker was targeting specific users, the damage to those users may have already been inflicted.</p>

<p>All three of the CRLs in question belong to <a href="http://www.usertrust.com/about.html">the same CA</a>:</p>

<p><code>
issuer=/C=US/ST=UT/L=Salt Lake City/O=The USERTRUST
Network/OU=http://www.usertrust.com/CN=UTN-USERFirst-Hardware
</code></p>

<p>This appears to be a reseller or something similar for the <a href="http://www.comodo.com/">Comodo CA company</a> when the trust chain for USERTRUST is inspected:</p>

<p><code>
CN = COMODO High Assurance Secure Server CA
</code></p>

<p>We appear to have no initial matches for the following Mozilla specific serials from the data that I gathered during the initial crlwatch data population run:</p>

<ul>
<li>009239d5348f40d1695a745470e1f23f43</li>
<li>00b0b7133ed096f9b56fae91c874bd3ac0</li>
<li>00d7558fdaf5f1105bb213282b707729a3</li>
<li>00d8f35f4eb7872b2dab0692e315382fb0</li>
<li>00e9028b9578e415dc1a710a2b88154447</li>
<li>00f5c86af36162f13a64f54f6dc9587c06</li>
</ul>

<p>Those serial numbers appear to not match, right? Nope. Mozilla appears
to deal with certificate serial numbers in a slightly different manner - Chrome does the same internally but Mozilla exposes a weird quirk of certificate encoding directly in the source. The human readable data does not contain this quirk. Thus if you remove the prefix of ‘00’ from those serial numbers and search for the sixteen byte values, we find what we&#39;d expect:</p>

<p><code>
Looking for 9239d5348f40d1695a745470e1f23f43 in parsed CRLs...
Match! Serial Number: 9239D5348F40D1695A745470E1F23F43
Match! Serial Number: 9239D5348F40D1695A745470E1F23F43
Match! Serial Number: 9239D5348F40D1695A745470E1F23F43
Looking for b0b7133ed096f9b56fae91c874bd3ac0 in parsed CRLs...
Match! Serial Number: B0B7133ED096F9B56FAE91C874BD3AC0
Match! Serial Number: B0B7133ED096F9B56FAE91C874BD3AC0
Match! Serial Number: B0B7133ED096F9B56FAE91C874BD3AC0
Looking for d7558fdaf5f1105bb213282b707729a3 in parsed CRLs...
Match! Serial Number: D7558FDAF5F1105BB213282B707729A3
Match! Serial Number: D7558FDAF5F1105BB213282B707729A3
Match! Serial Number: D7558FDAF5F1105BB213282B707729A3
Looking for d8f35f4eb7872b2dab0692e315382fb0 in parsed CRLs...
Match! Serial Number: D8F35F4EB7872B2DAB0692E315382FB0
Match! Serial Number: D8F35F4EB7872B2DAB0692E315382FB0
Match! Serial Number: D8F35F4EB7872B2DAB0692E315382FB0
Looking for e9028b9578e415dc1a710a2b88154447 in parsed CRLs...
Match! Serial Number: E9028B9578E415DC1A710A2B88154447
Match! Serial Number: E9028B9578E415DC1A710A2B88154447
Match! Serial Number: E9028B9578E415DC1A710A2B88154447
Looking for f5c86af36162f13a64f54f6dc9587c06 in parsed CRLs...
Match! Serial Number: F5C86AF36162F13A64F54F6DC9587C06
Match! Serial Number: F5C86AF36162F13A64F54F6DC9587C06
Match! Serial Number: F5C86AF36162F13A64F54F6DC9587C06
</code></p>

<p>Here&#39;s sample from one of those CRLs:</p>

<p><code>
    Serial Number: D7558FDAF5F1105BB213282B707729A3
        Revocation Date: Mar 15 20:15:26 2011 GMT
</code></p>

<p>Ironically, after all of this work, the Mozilla <a href="http://hg.mozilla.org/mozilla-central/rev/f6215eef2276#l1.57">patch also leaks the CA name</a> and confirmed my suspicions without question.</p>

<p>In the end, when the lists are merged, we find eleven certificates with two certificates probably acting as testing certificates for the two vendors involved:</p>

<ul>
<li>077a59bcd53459601ca6907267a6dd1c</li>
<li>047ecbe9fca55f7bd09eae36e10cae1e</li>
<li>392a434f0e07df1f8aa305de34e0c229</li>
<li>3e75ced46b693021218830ae86a82a71</li>
<li>72032105c50c08573d8ea5304efee8b0</li>
<li>9239d5348f40d1695a745470e1f23f43</li>
<li>b0b7133ed096f9b56fae91c874bd3ac0</li>
<li>d7558fdaf5f1105bb213282b707729a3</li>
<li>d8f35f4eb7872b2dab0692e315382fb0</li>
<li>e9028b9578e415dc1a710a2b88154447</li>
<li>f5c86af36162f13a64f54f6dc9587c06</li>
</ul>

<p>This is evidence of a rather serious event and one that cannot be ignored. If I had to make a bet, I&#39;d wager that an attacker was able to issue high value certificates, probably by compromising USERTRUST in some manner, this was discovered sometime before the revocation date, each certificate was revoked, the vendors notified, the patches were written, and binary builds kicked off - end users are probably still updating and thus many people are vulnerable to the failure that is the CRL and OCSP method for revocation. Even after users update, I&#39;m guessing they may be unequally protected. Mozilla and other browsers should force OCSP verification by default as part of their next release and remove CAs that are unable to handle this requirement. Users of Mozilla Firefox that are concerned about this issue should enable security.OCSP.require in the about:config dialog. The surveillance concerns of enabling OCSP are serious - a CA learns what sites you’re visiting. However, they are nullified by the fact that OCSP checking is enabled by default on Firefox at least; it simply doesn’t provide any security gains for the end user because when it fails, it fails open!</p>

<p>I contacted both Google and Mozilla ( <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=643056">bug #643056</a>) for comment after discovering the above data. Mozilla expressed some concern about disclosure and I offered to embargo this document until Tuesday March 22nd, the launch day for Firefox 4. They agreed and I kept this under my hat. After discussions between Comodo and Microsoft, passed on to me by Mozilla, the embargo was to be extended until Wednesday, March 23rd. This extension was ostensibly to ensure that Microsoft would be able to ship their Internet Explorer mitigation pack. After further discussion, Mozilla <a href="https://blog.mozilla.com/security/2011/03/22/firefox-blocking-fraudulent-certificates/">pushed their blog post about the issue</a> and I now consider the embargo lifted. Google has already shipped a fix to users. Install the latest Firefox to get a patch, if you haven&#39;t already. A Tor Browser update is in the works and will be available soon.</p>

<p>Mozilla offered some additional information and disclosed that <a href="https://addons.mozilla.org/">addons.mozilla.org</a> was one of the certificates acquired by the attacker. In total, nine certificates were acquired. Seven were uniquely named. Two of the certificates were re-issued for a previously issued host name. One certificate was issued for &quot;global trustee&quot; rather than a valid host name. With testing certificates in the list, we have a good accounting of the certificates found in the source code of each browser. Google clarified their discrepancy with the list, acknowledged the duplicate serial mistake and issued subsequent patches. Saving for test hosts, the lists are now identical.</p>

<p>If I had to guess at sites, I&#39;d speculate that Facebook, Skype, Google, Microsoft, Mozilla, and others are worthy of targeting. Comodo should disclose this information and clear up this speculation with very clear information about who was targeted.</p>

<p>Both vendors expressed that the CA in question had done something quite remarkable by disclosing this compromise. The incentives may not be in the favor of the CA for disclosure. Many CAs may fall to similar attacks and simply refuse to disclose. Hopefully crlwatch will provide us with meaningful data regarding revocation events. The EFF and The Tor Project are <a href="https://trac.torproject.org/projects/tor/wiki/HTTPSEverywhere/SSLObservatorySubmission">working on solutions for detecting anomalies in certificates</a> found in the wild. Still, some CAs may simply be unaware of compromises or unwilling to revoke for fear of detection.</p>

<p>Are all other browsers deploying similar countermeasures? Thanks to the free software nature of Firefox and Chrome, we have an answer for at least two projects. I wish that we could say the same for the rest of the browser world. One may assume that the CA in question did their best to contact all impacted vendors and targets.</p>

<p>Comodo has not yet revealed the extent of the compromise to the public - were their signing keys in a hardware security module? How many certificates in total were ever issued by this specific signing key? Wouldn&#39;t it be best to remove the specific signing keys from all trust roots to be extra careful given the stakes? Who exactly did they deem important enough for disclosure? The Tor Project, which ships the Tor Browser Bundle was not notified. Clearly some groups are being left out of the loop and this is where even a single attack really causes the entire CA trust model to fall apart.</p>

<p>Comodo should release the full certificates to the internet as well as all of the details relating to the attack. Mozilla and other browsers should open their bug reports, explain their process and lay out a path forward where we won&#39;t have to repeat this entire process again.</p>

<p>There is some suspicion that this action was taken by a state level adversary and there are some specific states that have been named. I’ll leave further speculation about which nation states may be involved to others. The mere fact that the web’s system of trust relies on an all or nothing property should be enough of a cause for alarm. It’s obvious that this has been and will continue to be exploited.</p>

<p>The impact on other cryptographic systems, such as S/MIME signatures and other cryptographic systems secured by CAs is entirely un-discussed. Quite seriously, when a CA is compromised, it will impact a great deal more than the web; users of email systems (SMTP, IMAP, POP,etc), Jabber servers, and any other SSL/TLS enabled systems are all at risk. Blocking specific serial numbers or relying on flawed, <a href="http://www.imperialviolet.org/2011/03/18/revocation.html">provably broken methods of revocation</a> will simply not cut it anymore. When the actual protection mechanisms are not enforced, there is little hope of end users being protected.</p>

<p>This should serve as a wake up call to the internet. We need to research, build, and share new methods for ensuring trust, identity, authenticity, and confidentiality on the internet. Proposals such as <a href="http://www.ietf.org/id/draft-ietf-dane-protocol-06.txt">DANE</a>, <a href="http://tools.ietf.org/html/draft-hallambaker-donotissue-03">CAA</a>, <a href="http://tools.ietf.org/html/draft-hoffman-server-has-tls-04">HASTLS</a>, and <a href="http://web.monkeysphere.info/">Monkeysphere</a> are steps in the right direction but they face an uphill battle from entrenched economic interests.</p>

<p>Certification Authorities may continue to provide a piece of the puzzle but it’s high time we ensure that they’re not the alpha and the omega, anymore.</p>

<p><strong>Update:</strong>
Comodo has issued <a href="http://www.comodo.com/Comodo-Fraud-Incident-2011-03-23.html">a statement confirming everything</a> that I&#39;ve said and more. They believe that this was a targeted attack by a state level actor and they have named Iran as the country they suspect. Mozilla has now opened the bug reports about the issue to the public. Microsoft has now <a href="http://www.microsoft.com/technet/security/advisory/2524375.mspx">disclosed their report</a> as well.</p>

<p>In the details of their statement we have a confirmation that they have the ability to monitor and thus surveille people who wish to know if certificates are valid.</p>

<p>Comodo also clearly demonstrate a mis-understanding - they believe that checks for revocation are proof positive that certificates are being used. They need to <strong><a href="http://www.imperialviolet.org/2011/03/18/revocation.html">read and understand why this is not true</a></strong> .</p>

<p>The browsers have dropped the ball and they have chosen to fail open in nearly every single case; an attacker who is able to MITM SSL/TLS will also MITM the OCSP/CRL requests. Moxie&#39;s <a href="http://www.thoughtcrime.org/software/sslstrip/">sslstrip</a> demonstrated that an attacker would do this automatically and his software has done this for OCSP in public since 2009. Mozilla did not fix this issue at the time and they have once again punted on the issue. An even <a href="http://www.imperialviolet.org/2011/03/18/revocation.html">lower tech attack is possible and it&#39;s why revocation does not work</a>: <strong>By returning a HTTP 500 error, the browser will the continue on as if revocation checks showed the certificate to be perfectly fine</strong> .</p>

<p>The browsers chose a user privacy invasive stance without the user protecting security properties. They did this because they claim that CAs are unable to provide working OCSP/CRL systems for request handling. This is a fair claim if true but it must not stand any longer. If the CA cannot provide even a basic level of revocation, it&#39;s clearly <strong>irresponsible</strong> to ship that CA root in a browser. <strong>Browsers should give insecure CA keys an Internet Death Sentence</strong> rather than expose the users of the browsers to known problems.</p>

<p>It&#39;s probably the case that Mozilla and other browsers should write a secure, caching OCSP server for use when a CA has a failure. It should probably be run by a neutral third party such as the EFF with a strong user privacy stance. This would only serve as a temporary fix and until Browsers get their act together, users are doomed anyway.</p>

<p>OCSP stapling does not fix this issue. The browsers treat revocation errors as soft errors and a MITM is deadly for revocation. The browsers believe they have to treat them as soft errors because the CAs are failing to do their job properly and are almost entirely unaccountable. The browsers are failing users by refusing to hold CAs to account. If OCSP and CRL failures mean the internet doesn&#39;t work, we need to create alternatives and not simply sweep these issues under the rug for later analysis. <strong>Browsers should hard fail on certificate revocation errors.</strong></p>

<p>Comodo has further failed by:</p>

<ul>
<li>Failing to produce further information about those certificates</li>
<li>Selective disclosure to &quot;<em>principal browsers and domain owners</em>&quot;</li>
<li>Failing to disclose what sub-CA/intermediate root actually did the signing</li>
<li>Believing that the attacker must control DNS for these attacks to succeed</li>
<li>Waiting <strong>eight days</strong> to disclose evidence of a specific targeted attack</li>
</ul>

<p>I believe that the browsers, such as Mozilla, are doing the best that they can in some ways but the lack of immediate full disclosure is a major failure.</p>

        </div>
      </section>
    
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="/blog/reading-links-21-march-2011-edition">Reading links, 21 March 2011 edition</a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">phobos</a> under
              
                <a class="post-category post-category-js" href="#">china</a>
              
                <a class="post-category post-category-js" href="#">edrigram</a>
              
                <a class="post-category post-category-js" href="#">gmail</a>
              
                <a class="post-category post-category-js" href="#">interesting links</a>
              
                <a class="post-category post-category-js" href="#">interesting reading</a>
              
                <a class="post-category post-category-js" href="#">internet censorship</a>
              
                <a class="post-category post-category-js" href="#">mandated content blocking</a>
              
                <a class="post-category post-category-js" href="#">reading links</a>
              
                <a class="post-category post-category-js" href="#">vpns</a>
               |
              22 Mar 2011
          </p>
        </header>
        <div class="post-description">
          <ul>
<li>The ramped up censorship of the Internet by China continues while the world is distracted by the Middle East and Japan. <a href="http://advocacy.globalvoicesonline.org/2011/03/20/china-pptp-and-l2tp-vpn-protocols-blocked/" title="http://advocacy.globalvoicesonline.org/2011/03/20/china-pptp-and-l2tp-vpn-protocols-blocked/">http://advocacy.globalvoicesonline.org/2011/03/20/china-pptp-and-l2tp-vp...</a></li>
<li>GMail blockage in China, or not. <a href="http://techcrunch.com/2011/03/21/google-and-china-at-it-again-with-government-gmail-block/" title="http://techcrunch.com/2011/03/21/google-and-china-at-it-again-with-government-gmail-block/">http://techcrunch.com/2011/03/21/google-and-china-at-it-again-with-gover...</a></li>
<li>On Mandated Content Blocking in the Domain Name System, <a href="http://www.circleid.com/posts/20110318_on_mandated_content_blocking_in_the_domain_name_system/" title="http://www.circleid.com/posts/20110318\_on\_mandated\_content\_blocking\_in\_the\_domain\_name\_system/">http://www.circleid.com/posts/20110318_on_mandated_content_blocking_in_t...</a></li>
<li>The always excellent EDRi-gram is out for March 2011, <a href="http://www.edri.org/edrigram/number9.5" title="http://www.edri.org/edrigram/number9.5">http://www.edri.org/edrigram/number9.5</a></li>
</ul>

        </div>
      </section>
    
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="/blog/february-2011-progress-report">February 2011 Progress Report</a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">phobos</a> under
              
                <a class="post-category post-category-js" href="#">bug fixes</a>
              
                <a class="post-category post-category-js" href="#">censosrhip circumvention</a>
              
                <a class="post-category post-category-js" href="#">downloads</a>
              
                <a class="post-category post-category-js" href="#">improvements</a>
              
                <a class="post-category post-category-js" href="#">incentives</a>
              
                <a class="post-category post-category-js" href="#">progress report</a>
              
                <a class="post-category post-category-js" href="#">research</a>
               |
              15 Mar 2011
          </p>
        </header>
        <div class="post-description">
          <p><strong>New hires</strong>
We contracted Runa Sandvik to work on moving the torouter project forward, <a href="https://trac.torproject.org/projects/tor/wiki/TheOnionRouter/Torouter" title="https://trac.torproject.org/projects/tor/wiki/TheOnionRouter/Torouter">https://trac.torproject.org/projects/tor/wiki/TheOnionRouter/Torouter</a>, translations, and integration of tor web server log analysis and publication.</p>

<p><strong>New Releases</strong>
On February 23rd, we released an updated Tor -stable. Tor 0.2.1.30 fixes a
variety of less critical bugs. The main other change is a slight tweak to Tor&#39;s TLS handshake that makes relays and bridges that run this new version reachable from Iran again. We don&#39;t expect this tweak will win the arms race long-term, but it
buys us time until we roll out a better solution. Full announcement at
 <a href="https://lists.torproject.org/pipermail/tor-announce/2011-February/000000.html" title="https://lists.torproject.org/pipermail/tor-announce/2011-February/000000.html">https://lists.torproject.org/pipermail/tor-announce/2011-February/000000...</a></p>

<p><strong>Censorship resistance</strong></p>

<ul>
<li>Arm development has stayed relatively on track, with the revised
connection panel very nearly achieving parity with its predecessor
(and in most respects surpassing it). Most of what remains are
refinements and tasty new features. Arm has also been added to Debian
(Sid) and Ubuntu (Natty) with backports pending. Many thanks to Peter
for his help.</li>
<li>Tom spent some time assisting Jacob with a satellite test. The test wound
up breaking due to flaky hardware, however they were able to collect some usable
data.</li>
<li>Created the trac ticket around hidden service improvements,
<a href="https://trac.torproject.org/projects/tor/ticket/2552" title="https://trac.torproject.org/projects/tor/ticket/2552">https://trac.torproject.org/projects/tor/ticket/2552</a>. We need to focus on
improving hidden services and fixing some of the performance and reliability
issues within.</li>
<li>Mike fixed a bunch of torbutton bugs. His summary iteration results are
at <a href="https://trac.torproject.org/projects/tor/ticket/2591" title="https://trac.torproject.org/projects/tor/ticket/2591">https://trac.torproject.org/projects/tor/ticket/2591</a>.</li>
<li>Mike helped fix the bandwidth authority on salsa that exploded due to a
reinstall.</li>
</ul>

<p><strong>Architecture and Design Docs for better censorship resistance</strong></p>

<ul>
<li>Karsten and Sebastian tried to improve the database schema in metrics-db
to speed up relay search performance. Unfortunately, the required updates
from the old schema took forever, so we don&#39;t just need a better schema, but
also a better migration strategy to go from one schema to the next.</li>
<li>Karsten started moving code from metrics-db to metrics-web to make the
metrics website a self-contained unit that&#39;s independent of
aggregating descriptors. The idea is that people can take the metrics-web
code and improve it or replace it with a better metrics website written in
the web language of their choice.</li>
<li>Karsten started working on better visualizations of Tor data using the
Thematic Mapping API together with Rachel Binx.</li>
</ul>

<p><strong>Hide Tor&#39;s network signature.</strong></p>

<ul>
<li>Collaborated with George K on obfsproxy, a generic protocol
obfuscator. It seems to work ok but needs more testing.</li>
<li>Nick worked on improving the pluggable-transport design.</li>
<li>Jacob did another revision on what is now prop 179,
<a href="https://gitweb.torproject.org/torspec.git/blob/HEAD:/proposals/179-TLS-cert-and-parameter-normalization.txt" title="https://gitweb.torproject.org/torspec.git/blob/HEAD:/proposals/179-TLS-cert-and-parameter-normalization.txt">https://gitweb.torproject.org/torspec.git/blob/HEAD:/proposals/179-TLS-c...</a></li>
<li>Jacob looked at the EFF SSL data and have some improvements for how we can
get better data for future research questions.</li>
</ul>

<p><strong>Outreach and Advocacy</strong></p>

<ul>
<li>Jacob continued working on Egypt related issues.</li>
<li>Jacob did a training for people in Bahrain.</li>
<li>Tor, the ACLU and the OPC launched our privacy challenge:
<a href="http://www.develop4privacy.org/" title="http://www.develop4privacy.org/">http://www.develop4privacy.org/</a>.</li>
<li>Jacob did a bit of looking at the Libyan Internet.</li>
<li>Jacob gave the keynote speech at the Ctrl-X-Ethics Workshop in Toronto on
ethics of security research.</li>
<li>We ran a successful hackfest with the help of MITs Center for Future Civic
Media, <a href="https://blog.torproject.org/blog/tor-open-hackfest-february-19-2011" title="https://blog.torproject.org/blog/tor-open-hackfest-february-19-2011">https://blog.torproject.org/blog/tor-open-hackfest-february-19-2011</a>
and the followup at <a href="https://blog.torproject.org/blog/hackfest-thanks" title="https://blog.torproject.org/blog/hackfest-thanks">https://blog.torproject.org/blog/hackfest-thanks</a>.</li>
<li>Roger was the keynote speaker for Workshop on Free and Open Communication
on the Internet (FOCI), <a href="http://www.gtisc.gatech.edu/foci.html" title="http://www.gtisc.gatech.edu/foci.html">http://www.gtisc.gatech.edu/foci.html</a>.</li>
<li>Andrew talked to the Wesleyan HFOSS team about Tor and classwork for their
Summer 2011 session. <a href="http://hfoss.org/" title="http://hfoss.org/">http://hfoss.org/</a>.</li>
<li>Roger and Steven presented at Financial Crypto and the Workshop on the
Ethics of Computer Security Research.</li>
<li>Andrew spoke at a few panels under Chatham House Rules. He published his
speech notes as a blog post,
<a href="https://blog.torproject.org/blog/five-minutes-speak" title="https://blog.torproject.org/blog/five-minutes-speak">https://blog.torproject.org/blog/five-minutes-speak</a>.</li>
<li>Roger wrote a blog post about using our data archive as input to new
safety metrics:
<a href="https://blog.torproject.org/blog/research-problem-measuring-safety-tor-" title="https://blog.torproject.org/blog/research-problem-measuring-safety-tor-">https://blog.torproject.org/blog/research-problem-measuring-safety-tor-</a>
network.</li>
<li>Roger talked to the Philly FBI for the Philadelphia Infragard chapter
about Tor and anonymity online.</li>
<li>Roger taught a Tor lecture for Drexel&#39;s security class.</li>
<li>Andrew was interviewed by Discovery News about Tor&#39;s role in the unrest in
Tunisia and Egypt,
<a href="http://news.discovery.com/tech/egypt-internet-online-protesters-110201.html" title="http://news.discovery.com/tech/egypt-internet-online-protesters-110201.html">http://news.discovery.com/tech/egypt-internet-online-protesters-110201.h...</a></li>
<li>Andrew was interviewed by the Walpole Times about Tor and what we do,
<a href="http://www.wickedlocal.com/walpole/news/x95296113/Tor-Project-a-Walpole-" title="http://www.wickedlocal.com/walpole/news/x95296113/Tor-Project-a-Walpole-">http://www.wickedlocal.com/walpole/news/x95296113/Tor-Project-a-Walpole-</a>
based-company-helps-Egyptians-avoid-Internet-censorship-during-protests.</li>
</ul>

<p><strong>Preconfigured privacy bundles</strong></p>

<ul>
<li>Jacob did some testing of Gibberbot&#39;s Tor and OTR integration. Gibberbot
is an XMPP chat client for Android designed to work over Tor.</li>
<li>Jacob did a bunch of work on ttdnsd - some important (but not critical)
bug fixes and he&#39;s planning on pushing out a release in the future. Jacob and
Robert did some work on torsocks integration and in the process hammered out a
reasonable torsocks API for people who want to have auto-magically Torified
sockets without understanding Tor internals.</li>
<li>Jacob worked on OpenWRT packaging issues - as well as other work on the
Torouter project.</li>
<li>Jacob worked on Tahoe ( <a href="http://tahoe-lafs.org/trac/tahoe-lafs" title="http://tahoe-lafs.org/trac/tahoe-lafs">http://tahoe-lafs.org/trac/tahoe-lafs</a>) and
Tor related Hidden Service documentation; after moderate amount of Tor testing
with Tahoe now and it seems to be partially functional.</li>
</ul>

<p><strong>Bridge work</strong></p>

<ul>
<li>Karsten prepared a patch for BridgeDB to export bridge pool assignments to
a local file. This patch needs some cleanup before being deployed on
BridgeDB.</li>
<li>Karsten wrote a first draft of a BridgeDB specification that Nick
commented on. The next step is to include Nick&#39;s comments and change the
writing style, so that the specification describes what the current BridgeDB
code does, not what a generic BridgeDB implemention should do.</li>
<li>Karsten extended the bridge descriptor sanitizing algorithm to include IP
address hashes in the sanitized descriptors. Sanitized all existing
bridge descriptors using this new algorithm. Instead of 127.0.0.1,
bridges now have 10.x.y.z addresses with x.y.z being stable for a given
bridge fingerprint in a given month. This allows analyses of how often
bridges change their IP addresses in a given month.</li>
<li>Christian deployed a new version of BridgeDB, the one that&#39;s i18n enabled
(#1613) and also can dump bridge pool assignments to files. We can now
assign an amount of unassigned bridges to someone/something and dump
them to file buckets. See #1612 for more infos. In theory, we can now
have an amount of Twitter assigned bridges that we pump out over
Twitter.</li>
<li>Christian also started writing a python script that is able to dump
stuff to Twitter.</li>
<li>After deployment of the new BridgeDB, some issues came up that were fixed
(#2556 and others). It seems to run smoothly now. We&#39;ll be even more
happy about it when we have important (read: Chinese and Farsi)
translations ready and deployed.</li>
<li>Christian and Karsten discussed about whether his planned &quot;dump bridge
pool
assignments to files&quot; feature can use the bucket mechanism of #1612.
Turns out it can&#39;t since both have a different set of goals and would
be to painful to sync with every change.</li>
<li>Mike helped Karsten with improving the output of Torperf for future
experiments involving circuit build timeouts.</li>
</ul>

<p><strong>Scalability</strong></p>

<ul>
<li>Improved Torperf and finally deployed it to collect data about used
paths and to measure performance with custom guard node selections.
This is still work in progress together with Mike and Tom as part of
our first Scrum iteration that ends on March 5.</li>
<li>Worked on Florian&#39;s and Björn&#39;s token bucket patch some more together
with Sebastian. The current state of the patch is that it needs some
more love before it can be merged into 0.2.3.x.</li>
<li>Nick collaborated a little with two volunteers on what we
think at this point must be the 5th generation of a &quot;launch a private
network&quot; tool. This one is called &quot;chutney&quot;.</li>
<li>Nick reviewed a bunch of patches, reviewed a bunch of bugs, fixed a
bunch of bugs, merged many people&#39;s code, got 0.2.2.x closer to done.</li>
<li>Sebastian wrote a proposal for a safer voting process for consensus
parameters, and wrote an implementation for it.
<a href="https://gitweb.torproject.org/torspec.git/blob/HEAD:/proposals/178-param-" title="https://gitweb.torproject.org/torspec.git/blob/HEAD:/proposals/178-param-">https://gitweb.torproject.org/torspec.git/blob/HEAD:/proposals/178-param...</a>
voting.txt</li>
<li>Damian started thinking about our various projects in a more streamlined
and easy-to-understand way. The results are at
<a href="https://www.torproject.org/getinvolved/volunteer.html.en#Projects" title="https://www.torproject.org/getinvolved/volunteer.html.en#Projects">https://www.torproject.org/getinvolved/volunteer.html.en#Projects</a>.</li>
</ul>

<p><strong>Incentives</strong></p>

<ul>
<li>Christian cleaned up the rather hackish installation of Weather on bahri.
The stable installation now lives under <code>/home/weather/opt/current&#39; and actually
is update-able through</code>git pull&#39;. There&#39;s also a testing installation to test
stuff and play around at <a href="https://weather2.torproject.org/" title="https://weather2.torproject.org/">https://weather2.torproject.org/</a>. He&#39;s tried to
update the documentation with all the stuff that is necessary to install and run
Weather.</li>
<li>Christian tried looking into #2467. Some people complained that Weather
didn&#39;t know their relay fingerprint. On Sebastian&#39;s and Mike&#39;s idea, Christian
changed the torrc to include <code>FetchDirInfoEarly 1&#39; and</code>FetchUselessDescriptors
1&#39;. Since that no one complained again about Weather not knowing a certain relay
(except for one time, when the Weather process had silently crashed and
therefore the database wasn&#39;t updated for a day).</li>
<li>After Tor 0.2.1.30 was tagged and made it to the recommended versions&#39;,
people running 0.2.1.29 started complaining about getting &quot;Node out of date!&quot;
emails from Weather. It turned out that Weather was actually doing the right
thing, namely mailing them that they were not running the latest recommended
stable version anymore. No one seemed to have read the text near the checkbox in
the signup process. After discussing this intensely with Sebastian, we decided
to go for a more simple solution: People now get email when they don&#39;t run one
of the recommended versions or a more recent dev version of Tor.</li>
</ul>

<p><strong>More reliable downloads</strong></p>

<ul>
<li>Christian did a rather large GetTor overhaul. The way GetTor manages its
packages is now much easier to understand and enhance. GetTor moved from a
ini-style configuration file and parser to a more BridgeDB-like configuration
management. Also, packages are now configured rather than hard coded. In
addition, he cleaned up the i18n management of GetTor to something similar to
what we use in BridgeDB. Not only are the translation strings cleaner now, but
the translation and installation is smoother. Also, the logging was simplified
because it had too many features that no one used and generally was polluting
the log file with too much useless information. Furthermore, the MakeStat.py
script that
creates GetTor&#39;s package statistics was simplified a lot.</li>
<li>Christian fixed #1586, users requesting non-existent split packages now
are informed about that fact.</li>
<li>Nick worked on a thandy packaging spec with Erinn.</li>
</ul>

<p><strong>Translations</strong></p>

<ul>
<li>Sebastian Started figuring out a way how translations can be pulled from
transifex and used in their respective products in a more automated
fashion.</li>
<li>New or updated website translations in French, Russian, Italian, Japanese,
Spanish, Mandarin Chinese, and Greek.</li>
</ul>

<p><thead><tr>
<th>Attachment</th>
<th>Size</th> </tr></thead><tbody>
 <tr class="odd">
<td><a href="https://blog.torproject.org/files/2011-February-Monthly-Report.pdf">2011-February-Monthly-Report.pdf</a></td>
<td>367.07 KB</td> </tr>
</tbody></p>

        </div>
      </section>
    
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="/blog/reading-links-11-march-2011">Reading links for 11 March 2011</a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">phobos</a> under
              
                <a class="post-category post-category-js" href="#">interesting topics</a>
              
                <a class="post-category post-category-js" href="#">reading links</a>
              
                <a class="post-category post-category-js" href="#">thoughts</a>
              
                <a class="post-category post-category-js" href="#">what we're reading</a>
               |
              11 Mar 2011
          </p>
        </header>
        <div class="post-description">
          <ul>
<li>Woah, &quot;France Goes Overboard In Data Retention: Wants User Passwords Retained&quot;, <a href="http://www.techdirt.com/articles/20110303/03520213350/france-goes-overboard-data-retention-wants-user-passwords-retained.shtml" title="http://www.techdirt.com/articles/20110303/03520213350/france-goes-overboard-data-retention-wants-user-passwords-retained.shtml">http://www.techdirt.com/articles/20110303/03520213350/france-goes-overbo...</a></li>
<li>Tor is a finalist in &quot;Free Expression Awards 2011: New Media&quot;, <a href="http://www.indexoncensorship.org/2011/03/free-expression-awards-2011-new-media/" title="http://www.indexoncensorship.org/2011/03/free-expression-awards-2011-new-media/">http://www.indexoncensorship.org/2011/03/free-expression-awards-2011-new...</a></li>
<li>&quot;Svenska biståndspengar till Facebookrevolutionen&quot;, <a href="http://www.nyteknik.se/nyheter/it_telekom/internet/article3123594.ece" title="http://www.nyteknik.se/nyheter/it\_telekom/internet/article3123594.ece">http://www.nyteknik.se/nyheter/it_telekom/internet/article3123594.ece</a></li>
<li>Secret proposals to destroy privacy on earth, <a href="http://www.techdirt.com/articles/20110311/00104713434/us-proposals-secret-tpp-son-acta-treaty-leaked-chock-full-awful-ideas.shtml" title="http://www.techdirt.com/articles/20110311/00104713434/us-proposals-secret-tpp-son-acta-treaty-leaked-chock-full-awful-ideas.shtml">http://www.techdirt.com/articles/20110311/00104713434/us-proposals-secre...</a></li>
<li>Internet censorship in America, <a href="http://www.techdirt.com/articles/20110304/01390113359/rep-lofgren-challenges-ip-czar-legality-domain-seizures.shtml" title="http://www.techdirt.com/articles/20110304/01390113359/rep-lofgren-challenges-ip-czar-legality-domain-seizures.shtml">http://www.techdirt.com/articles/20110304/01390113359/rep-lofgren-challe...</a></li>
<li>New net rules set to make cookies crumble, <a href="http://www.bbc.co.uk/news/technology-12668552" title="http://www.bbc.co.uk/news/technology-12668552">http://www.bbc.co.uk/news/technology-12668552</a></li>
</ul>

        </div>
      </section>
    
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="/blog/tor-02223-alpha-out">Tor 0.2.2.23-alpha is out</a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">erinn</a> under
              
                <a class="post-category post-category-js" href="#">alpha releases</a>
              
                <a class="post-category post-category-js" href="#">bug fixes</a>
              
                <a class="post-category post-category-js" href="#">directory authorities</a>
              
                <a class="post-category post-category-js" href="#">tor</a>
               |
              10 Mar 2011
          </p>
        </header>
        <div class="post-description">
          <p>Tor 0.2.2.23-alpha lets relays record their bandwidth history so when
 they restart they don&#39;t lose their bandwidth capacity estimate. This
 release also fixes a diverse set of user-facing bugs, ranging from
 relays overrunning their rate limiting to clients falsely warning about
 clock skew to bridge descriptor leaks by our bridge directory authority.</p>

<p><a href="https://torproject.org/download/download" title="https://torproject.org/download/download">https://torproject.org/download/download</a></p>

<p><strong>Major bugfixes:</strong></p>

<ul>
<li>Stop sending a CLOCK_SKEW controller status event whenever
we fetch directory information from a relay that has a wrong clock.
Instead, only inform the controller when it&#39;s a trusted authority
that claims our clock is wrong. Bugfix on 0.1.2.6-alpha; fixes
the rest of bug 1074.</li>
<li>Fix an assert in parsing router descriptors containing IPv6
addresses. This one took down the directory authorities when
somebody tried some experimental code. Bugfix on 0.2.1.3-alpha.</li>
<li>Make the bridge directory authority refuse to answer directory
requests for &quot;all&quot; descriptors. It used to include bridge
descriptors in its answer, which was a major information leak.
Found by &quot;piebeer&quot;. Bugfix on 0.2.0.3-alpha.</li>
<li>If relays set RelayBandwidthBurst but not RelayBandwidthRate,
Tor would ignore their RelayBandwidthBurst setting,
potentially using more bandwidth than expected. Bugfix on
0.2.0.1-alpha. Reported by Paul Wouters. Fixes bug 2470.</li>
<li>Ignore and warn if the user mistakenly sets &quot;PublishServerDescriptor
hidserv&quot; in her torrc. The &#39;hidserv&#39; argument never controlled
publication of hidden service descriptors. Bugfix on 0.2.0.1-alpha.</li>
</ul>

<p><strong>Major features:</strong></p>

<ul>
<li>Relays now save observed peak bandwidth throughput rates to their
state file (along with total usage, which was already saved)
so that they can determine their correct estimated bandwidth on
restart. Resolves bug 1863, where Tor relays would reset their
estimated bandwidth to 0 after restarting.</li>
<li>Directory authorities now take changes in router IP address and
ORPort into account when determining router stability. Previously,
if a router changed its IP or ORPort, the authorities would not
treat it as having any downtime for the purposes of stability
calculation, whereas clients would experience downtime since the
change could take a while to propagate to them. Resolves issue 1035.</li>
<li>Enable Address Space Layout Randomization (ASLR) and Data Execution
Prevention (DEP) by default on Windows to make it harder for
attackers to exploit vulnerabilities. Patch from John Brooks.</li>
</ul>

<p><strong>Minor bugfixes (on 0.2.1.x and earlier):</strong></p>

<ul>
<li>Fix a rare crash bug that could occur when a client was configured
with a large number of bridges. Fixes bug 2629; bugfix on
0.2.1.2-alpha. Bugfix by trac user &quot;shitlei&quot;.</li>
<li>Avoid a double mark-for-free warning when failing to attach a
transparent proxy connection. Bugfix on 0.1.2.1-alpha. Fixes
bug 2279.</li>
<li>Correctly detect failure to allocate an OpenSSL BIO. Fixes bug 2378;
found by &quot;cypherpunks&quot;. This bug was introduced before the first
Tor release, in svn commit r110.</li>
<li>Country codes aren&#39;t supported in EntryNodes until 0.2.3.x, so
don&#39;t mention them in the manpage. Fixes bug 2450; issue
spotted by keb and G-Lo.</li>
<li>Fix a bug in bandwidth history state parsing that could have been
triggered if a future version of Tor ever changed the timing
granularity at which bandwidth history is measured. Bugfix on
Tor 0.1.1.11-alpha.</li>
<li>When a relay decides that its DNS is too broken for it to serve
as an exit server, it advertised itself as a non-exit, but
continued to act as an exit. This could create accidental
partitioning opportunities for users. Instead, if a relay is
going to advertise reject *:* as its exit policy, it should
really act with exit policy &quot;reject *:*&quot;. Fixes bug 2366.
Bugfix on Tor 0.1.2.5-alpha. Bugfix by user &quot;postman&quot; on trac.</li>
<li>In the special case where you configure a public exit relay as your
bridge, Tor would be willing to use that exit relay as the last
hop in your circuit as well. Now we fail that circuit instead.
Bugfix on 0.2.0.12-alpha. Fixes bug 2403. Reported by &quot;piebeer&quot;.</li>
<li>Fix a bug with our locking implementation on Windows that couldn&#39;t
correctly detect when a file was already locked. Fixes bug 2504,
bugfix on 0.2.1.6-alpha.</li>
<li>Fix IPv6-related connect() failures on some platforms (BSD, OS X).
Bugfix on 0.2.0.3-alpha; fixes first part of bug 2660. Patch by
&quot;piebeer&quot;.</li>
<li>Set target port in get_interface_address6() correctly. Bugfix
on 0.1.1.4-alpha and 0.2.0.3-alpha; fixes second part of bug 2660.</li>
<li>Directory authorities are now more robust to hops back in time
when calculating router stability. Previously, if a run of uptime
or downtime appeared to be negative, the calculation could give
incorrect results. Bugfix on 0.2.0.6-alpha; noticed when fixing
bug 1035.</li>
<li>Fix an assert that got triggered when using the TestingTorNetwork
configuration option and then issuing a GETINFO config-text control
command. Fixes bug 2250; bugfix on 0.2.1.2-alpha.</li>
</ul>

<p><strong>Minor bugfixes (on 0.2.2.x):</strong></p>

<ul>
<li>Clients should not weight BadExit nodes as Exits in their node
selection. Similarly, directory authorities should not count BadExit
bandwidth as Exit bandwidth when computing bandwidth-weights.
Bugfix on 0.2.2.10-alpha; fixes bug 2203.</li>
<li>Correctly clear our dir_read/dir_write history when there is an
error parsing any bw history value from the state file. Bugfix on
Tor 0.2.2.15-alpha.</li>
<li>Resolve a bug in verifying signatures of directory objects
with digests longer than SHA1. Bugfix on 0.2.2.20-alpha.
Fixes bug 2409. Found by &quot;piebeer&quot;.</li>
<li>Bridge authorities no longer crash on SIGHUP when they try to
publish their relay descriptor to themselves. Fixes bug 2572. Bugfix
on 0.2.2.22-alpha.</li>
</ul>

<p><strong>Minor features:</strong></p>

<ul>
<li>Log less aggressively about circuit timeout changes, and improve
some other circuit timeout messages. Resolves bug 2004.</li>
<li>Log a little more clearly about the times at which we&#39;re no longer
accepting new connections. Resolves bug 2181.</li>
<li>Reject attempts at the client side to open connections to private
IP addresses (like 127.0.0.1, 10.0.0.1, and so on) with
a randomly chosen exit node. Attempts to do so are always
ill-defined, generally prevented by exit policies, and usually
in error. This will also help to detect loops in transparent
proxy configurations. You can disable this feature by setting
&quot;ClientRejectInternalAddresses 0&quot; in your torrc.</li>
<li>Always treat failure to allocate an RSA key as an unrecoverable
allocation error.</li>
<li>Update to the March 1 2011 Maxmind GeoLite Country database.</li>
</ul>

<p><strong>Minor features (log subsystem):</strong></p>

<ul>
<li>Add documentation for configuring logging at different severities in
different log domains. We&#39;ve had this feature since 0.2.1.1-alpha,
but for some reason it never made it into the manpage. Fixes
bug 2215.</li>
<li>Make it simpler to specify &quot;All log domains except for A and B&quot;.
Previously you needed to say &quot;[*,~A,~B]&quot;. Now you can just say
&quot;[~A,~B]&quot;.</li>
<li>Add a &quot;LogMessageDomains 1&quot; option to include the domains of log
messages along with the messages. Without this, there&#39;s no way
to use log domains without reading the source or doing a lot
of guessing.</li>
</ul>

<p><strong>Packaging changes:</strong></p>

<ul>
<li>Stop shipping the Tor specs files and development proposal documents
in the tarball. They are now in a separate git repository at
git://git.torproject.org/torspec.git</li>
</ul>

        </div>
      </section>
    

     <!-- Pagination links -->
    <div class="pagination">
      
        <a href="/blog/page79" class="previous">Previous</a>
      
      <span class="page_number ">Page: 80 of 133</span>
      
        <a href="/blog/page81" class="next">Next</a>
      
    </div>
  </div>

</div>


            <div class="footer">
                <div class="pure-menu pure-menu-horizontal pure-menu-open">
                    <ul>
                        <li><a href="http://purecss.io/">About</a></li>
                        <li><a href="http://twitter.com/yuilibrary/">Twitter</a></li>
                        <li><a href="http://github.com/yahoo/pure/">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
