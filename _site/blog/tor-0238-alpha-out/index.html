<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tor 0.2.3.8-alpha is out</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example that shows off a blog page with a list of posts.">
    <meta name="robots" content="noindex" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/styles.css">

    <!--[if lte IE 8]>
      <link rel="stylesheet" href="css/blog-old-ie.css">
    <![endif]-->
    <!--[if lt IE 9]>
      <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
    <![endif]-->
</head>
<body>

<body>
<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
            <a href="/"><img class="tor-logo" src="/assets/images/tor_logo.png" alt="Tor logo" /></a>
            <h1 class="brand-title">The Tor Project Blog</h1>
            <h2 class="brand-tagline">News and events from Tor</h2>

            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="pure-button" href="/events/">Events</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="https://www.torproject.org/overview">About Tor</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="https://www.torproject.org/donate/donate">Donate</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <div class="content pure-u-1 pure-u-md-3-4">
        <div>

            <!-- A wrapper for all the blog posts -->
<div class="posts">

  <div id="home">
      <section class="post">
        <header class="post-header">
          <h2 class="post-title"> <a href="">Tor 0.2.3.8-alpha is out</a></h2>
          <p class="post-meta">
              By <a class="post-author" href="#">erinn</a> under
              
                <a class="post-category post-category-js" href="#">alpha releases</a>
              
                <a class="post-category post-category-js" href="#">bug fixes</a>
              
                <a class="post-category post-category-js" href="#">tor</a>
              
                <a class="post-category post-category-js" href="#">windows</a>
               |
              24 Nov 2011
          </p>
        </header>
        <div class="post-description">
          <p>Tor 0.2.3.8-alpha fixes some crash and assert bugs, including a
 socketpair-related bug that has been bothering Windows users. It adds
 support to serve microdescriptors to controllers, so Vidalia&#39;s network
 map can resume listing relays (once Vidalia implements its side),
 and adds better support for hardware AES acceleration. Finally, it
 starts the process of adjusting the bandwidth cutoff for getting the
 &quot;Fast&quot; flag from 20KB to (currently) 32KB -- preliminary results show
 that tiny relays harm performance more than they help network capacity.</p>

<p><strong>Changes in version 0.2.3.8-alpha - 2011-11-22</strong>
<strong>Major bugfixes:</strong></p>

<ul>
<li>Initialize Libevent with the EVENT_BASE_FLAG_NOLOCK flag enabled, so
that it doesn&#39;t attempt to allocate a socketpair. This could cause
some problems on Windows systems with overzealous firewalls. Fix for
bug 4457; workaround for Libevent versions 2.0.1-alpha through
2.0.15-stable.</li>
<li>Correctly sanity-check that we don&#39;t underflow on a memory
allocation (and then assert) for hidden service introduction
point decryption. Bug discovered by Dan Rosenberg. Fixes bug 4410;
bugfix on 0.2.1.5-alpha.</li>
<li>Remove the artificially low cutoff of 20KB to guarantee the Fast
flag. In the past few years the average relay speed has picked
up, and while the &quot;top 7/8 of the network get the Fast flag&quot; and
&quot;all relays with 20KB or more of capacity get the Fast flag&quot; rules
used to have the same result, now the top 7/8 of the network has
a capacity more like 32KB. Bugfix on 0.2.1.14-rc. Fixes bug 4489.</li>
<li>Fix a rare assertion failure when checking whether a v0 hidden
service descriptor has any usable introduction points left, and
we don&#39;t have enough information to build a circuit to the first
intro point named in the descriptor. The HS client code in
0.2.3.x no longer uses v0 HS descriptors, but this assertion can
trigger on (and crash) v0 HS authorities. Fixes bug 4411.
Bugfix on 0.2.3.1-alpha; diagnosed by frosty_un.</li>
<li>Make bridge authorities not crash when they are asked for their own
descriptor. Bugfix on 0.2.3.7-alpha, reported by Lucky Green.</li>
<li>When running as a client, do not print a misleading (and plain
wrong) log message that we&#39;re collecting &quot;directory request&quot;
statistics: clients don&#39;t collect statistics. Also don&#39;t create a
useless (because empty) stats file in the stats/ directory. Fixes
bug 4353; bugfix on 0.2.2.34 and 0.2.3.7-alpha.</li>
</ul>

<p><strong>Major features:</strong></p>

<ul>
<li>Allow Tor controllers like Vidalia to obtain the microdescriptor
for a relay by identity digest or nickname. Previously,
microdescriptors were only available by their own digests, so a
controller would have to ask for and parse the whole microdescriptor
consensus in order to look up a single relay&#39;s microdesc. Fixes
bug 3832; bugfix on 0.2.3.1-alpha.</li>
<li>Use OpenSSL&#39;s EVP interface for AES encryption, so that all AES
operations can use hardware acceleration (if present). Resolves
ticket 4442.</li>
</ul>

<p><strong>Minor bugfixes (on 0.2.2.x and earlier):</strong></p>

<ul>
<li>Detect failure to initialize Libevent. This fix provides better
detection for future instances of bug 4457.</li>
<li>Avoid frequent calls to the fairly expensive cull_wedged_cpuworkers
function. This was eating up hideously large amounts of time on some
busy servers. Fixes bug 4518; bugfix on 0.0.9.8.</li>
<li>Don&#39;t warn about unused log_mutex in log.c when building with
--disable-threads using a recent GCC. Fixes bug 4437; bugfix on
0.1.0.6-rc which introduced --disable-threads.</li>
<li>Allow manual &#39;authenticate&#39; commands to the controller interface
from netcat (nc) as well as telnet. We were rejecting them because
they didn&#39;t come with the expected whitespace at the end of the
command. Bugfix on 0.1.1.1-alpha; fixes bug 2893.</li>
<li>Fix some (not actually triggerable) buffer size checks in usage of
tor_inet_ntop. Fixes bug 4434; bugfix on Tor 0.2.0.1-alpha. Patch
by Anders Sundman.</li>
<li>Fix parsing of some corner-cases with tor_inet_pton(). Fixes
bug 4515; bugfix on 0.2.0.1-alpha; fix by Anders Sundman.</li>
<li>When configuring, starting, or stopping an NT service, stop
immediately after the service configuration attempt has succeeded
or failed. Fixes bug 3963; bugfix on 0.2.0.7-alpha.</li>
<li>When sending a NETINFO cell, include the original address
received for the other side, not its canonical address. Found
by &quot;troll_un&quot;; fixes bug 4349; bugfix on 0.2.0.10-alpha.</li>
<li>Rename the bench_{aes,dmap} functions to test_*, so that tinytest
can pick them up when the tests aren&#39;t disabled. Bugfix on
0.2.2.4-alpha which introduced tinytest.</li>
<li>Fix a memory leak when we check whether a hidden service
descriptor has any usable introduction points left. Fixes bug

<ol>
<li>Bugfix on 0.2.2.25-alpha.</li>
</ol></li>
<li>Fix a memory leak in launch_direct_bridge_descriptor_fetch() that
occurred when a client tried to fetch a descriptor for a bridge
in ExcludeNodes. Fixes bug 4383; bugfix on 0.2.2.25-alpha.</li>
</ul>

<p><strong>Minor bugfixes (on 0.2.3.x):</strong></p>

<ul>
<li>Make util unit tests build correctly with MSVC. Bugfix on
0.2.3.3-alpha. Patch by Gisle Vanem.</li>
<li>Successfully detect AUTH_CHALLENGE cells with no recognized
authentication type listed. Fixes bug 4367; bugfix on 0.2.3.6-alpha.
Found by frosty_un.</li>
<li>If a relay receives an AUTH_CHALLENGE cell it can&#39;t answer,
it should still send a NETINFO cell to allow the connection to
become open. Fixes bug 4368; fix on 0.2.3.6-alpha; bug found by
&quot;frosty&quot;.</li>
<li>Log less loudly when we get an invalid authentication certificate
from a source other than a directory authority: it&#39;s not unusual
to see invalid certs because of clock skew. Fixes bug 4370; bugfix
on 0.2.3.4-alpha and 0.2.3.6-alpha.</li>
</ul>

<p><strong>Minor features:</strong></p>

<ul>
<li>Add two new config options for directory authorities:
AuthDirFastGuarantee sets a bandwidth threshold for guaranteeing the
Fast flag, and AuthDirGuardBWGuarantee sets a bandwidth threshold
that is always sufficient to satisfy the bandwidth requirement for
the Guard flag. Now it will be easier for researchers to simulate
Tor networks with different values. Resolves ticket 4484.</li>
<li>When Tor ignores a hidden service specified in its configuration,
include the hidden service&#39;s directory in the warning message.
Previously, we would only tell the user that some hidden service
was ignored. Bugfix on 0.0.6; fixes bug 4426.</li>
<li>When we fail to initialize Libevent, retry with IOCP disabled so we
don&#39;t need to turn on multi-threading support in Libevent, which in
turn requires a working socketpair(). This is a workaround for bug
4457, which affects Libevent versions from 2.0.1-alpha through
2.0.15-stable.</li>
<li>Detect when we try to build on a platform that doesn&#39;t define
AF_UNSPEC to 0. We don&#39;t work there, so refuse to compile.</li>
<li>Update to the November 1 2011 Maxmind GeoLite Country database.</li>
</ul>

<p><strong>Packaging changes:</strong></p>

<ul>
<li>Make it easier to automate expert package builds on Windows,
by removing an absolute path from makensis.exe command.</li>
</ul>

<p><strong>Code simplifications and refactoring:</strong></p>

<ul>
<li>Remove some redundant #include directives throughout the code.
Patch from Andrea Gelmini.</li>
<li>Unconditionally use OpenSSL&#39;s AES implementation instead of our
old built-in one. OpenSSL&#39;s AES has been better for a while, and
relatively few servers should still be on any version of OpenSSL
that doesn&#39;t have good optimized assembly AES.</li>
<li>Use the name &quot;CERTS&quot; consistently to refer to the new cell type;
we were calling it CERT in some places and CERTS in others.</li>
</ul>

<p><strong>Testing:</strong></p>

<ul>
<li>Numerous new unit tests for functions in util.c and address.c by
Anders Sundman.</li>
<li>The long-disabled benchmark tests are now split into their own
./src/test/bench binary.</li>
<li>The benchmark tests can now use more accurate timers than
gettimeofday() when such timers are available.</li>
</ul>

        </div>
      </section>
  </div>

</div>

<div class="comments"></div>

<script type="text/javascript" class="juvia">
(function() {
    var options = {
        container    : '.comments',
        site_key     : 'im3x57usjcg72fkm6lyqzwzt7vaoi4g',
        topic_key    : '/blog/tor-0238-alpha-out',
        topic_url    : location.href,
        topic_title  : document.title || location.href,
        include_base : !window.Juvia,
        include_css  : !window.Juvia,
        comment_order: 'latest-first'
    };

    function makeQueryString(options) {
        var key, params = [];
        for (key in options) {
            params.push(
                encodeURIComponent(key) +
                '=' +
                encodeURIComponent(options[key]));
        }
        return params.join('&');
    }

    function makeApiUrl(options) {
        // Makes sure that each call generates a unique URL, otherwise
        // the browser may not actually perform the request.
        if (!('_juviaRequestCounter' in window)) {
            window._juviaRequestCounter = 0;
        }

        var result =
            'http://secure-fortress-4525.herokuapp.com/api/show_topic.js' +
            '?_c=' + window._juviaRequestCounter +
            '&' + makeQueryString(options);
        window._juviaRequestCounter++;
        return result;
    }

    var s       = document.createElement('script');
    s.async     = true;
    s.type      = 'text/javascript';
    s.className = 'juvia';
    s.src       = makeApiUrl(options);
    (document.getElementsByTagName('head')[0] ||
     document.getElementsByTagName('body')[0]).appendChild(s);
})();
</script>


            <div class="footer">
                <div class="pure-menu pure-menu-horizontal pure-menu-open">
                    <ul>
                        <li><a href="http://purecss.io/">About</a></li>
                        <li><a href="http://twitter.com/yuilibrary/">Twitter</a></li>
                        <li><a href="http://github.com/yahoo/pure/">GitHub</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
